import{b as e}from"./index-Mm4FQecB.js";const r={getOnlineUsers:async()=>e.get("/xray/online"),getStatus:async()=>e.get("/xray/status"),getConfig:async()=>e.get("/xray/config"),reloadConfig:async()=>e.post("/xray/config/reload"),restart:async()=>e.post("/xray/restart"),getUpdatePolicy:async()=>e.get("/xray/update/policy"),getUpdatePreflight:async()=>e.get("/xray/update/preflight"),getUpdateHistory:async(a={})=>e.get("/xray/update/history",{params:a}),runCanaryUpdate:async(a={})=>e.post("/xray/update/canary",a),runFullUpdate:async(a={})=>e.post("/xray/update/full",a),getRollbackBackups:async()=>e.get("/xray/update/backups"),getUpdateReleaseIntel:async(a={})=>e.get("/xray/update/releases",{params:a}),runRollback:async(a={})=>e.post("/xray/update/rollback",a),runUpdateUnlock:async(a={})=>e.post("/xray/update/unlock",a),runRuntimeDoctor:async(a={})=>e.post("/xray/update/runtime-doctor",a),getConfigSnapshots:async(a={})=>e.get("/xray/config/snapshots",{params:a}),createConfigSnapshot:async()=>e.post("/xray/config/snapshots"),rollbackConfigSnapshot:async a=>e.post("/xray/config/rollback",a),getRoutingProfile:async()=>e.get("/xray/routing/profile"),updateRoutingProfile:async a=>e.put("/xray/routing/profile",a),getGeodataStatus:async(a={})=>e.get("/xray/geodata/status",{params:a}),updateGeodata:async(a={})=>e.post("/xray/geodata/update",a),syncConfDir:async()=>e.post("/xray/confdir/sync"),getConfDirStatus:async()=>e.get("/xray/confdir/status")},s=async()=>(await r.getOnlineUsers()).data??{count:0,users:[]},o=async()=>(await r.getStatus()).data??{running:!1,version:"unknown"},c=async()=>(await r.getConfig()).data??{},u=async()=>(await r.reloadConfig()).data??{success:!1,message:"Unable to reload Xray config"},i=async()=>(await r.restart()).data??{success:!1,message:"Unable to restart Xray"},y=async()=>(await r.getUpdatePolicy()).data??{mode:"docker",updatesEnabled:!0,requireCanaryBeforeFull:!0,canaryWindowMinutes:360,defaultChannel:"stable",updateTimeoutMs:20*60*1e3,canaryReady:!1,lastSuccessfulCanaryAt:null},p=async()=>(await r.getUpdatePreflight()).data??{mode:"docker",updatesEnabled:!0,ready:!1,lockName:"one-ui-xray-update",generatedAt:new Date().toISOString(),checks:[]},d=async(a={})=>{const t=await r.getUpdateHistory(a);return{items:t.data??[],pagination:t.pagination??{page:a.page||1,limit:a.limit||20,total:(t.data??[]).length,totalPages:1}}},l=async(a={})=>{const t=await r.runCanaryUpdate(a);if(!t.data)throw new Error(t.message||"Unable to run Xray canary update");return t.data},g=async(a={})=>{const t=await r.runFullUpdate(a);if(!t.data)throw new Error(t.message||"Unable to run Xray full update");return t.data},f=async()=>(await r.getRollbackBackups()).data??[],w=async(a={})=>{const t=await r.getUpdateReleaseIntel(a);if(!t.data)throw new Error(t.message||"Unable to fetch Xray release intel");return t.data},U=async(a={})=>{const t=await r.runRollback(a);if(!t.data)throw new Error(t.message||"Unable to run Xray rollback");return t.data},h=async(a={})=>{const t=await r.runUpdateUnlock(a);if(!t.data)throw new Error(t.message||"Unable to unlock Xray update lock");return t.data},b=async(a={})=>{const t=await r.runRuntimeDoctor(a);if(!t.data)throw new Error(t.message||"Unable to run runtime doctor");return t.data},X=async(a={})=>(await r.getConfigSnapshots(a)).data??{directory:"",snapshots:[]},k=async()=>{const a=await r.createConfigSnapshot();if(!a.data)throw new Error(a.message||"Unable to create config snapshot");return a.data},m=async a=>{const t=await r.rollbackConfigSnapshot(a);if(!t.data)throw new Error(t.message||"Unable to rollback config snapshot");return t.data},x=async()=>{const a=await r.getRoutingProfile();if(!a.data)throw new Error(a.message||"Unable to fetch routing profile");return a.data},C=async a=>{const t=await r.updateRoutingProfile(a);if(!t.data)throw new Error(t.message||"Unable to update routing profile");return t.data},S=async(a={})=>{const t=await r.getGeodataStatus(a);if(!t.data)throw new Error(t.message||"Unable to fetch geodata status");return t.data},R=async(a={})=>{const t=await r.updateGeodata(a);if(!t.data)throw new Error(t.message||"Unable to update geodata");return t.data},E=async()=>{const a=await r.syncConfDir();if(!a.data)throw new Error(a.message||"Unable to sync confdir");return a.data},P=async()=>{const a=await r.getConfDirStatus();if(!a.data)throw new Error(a.message||"Unable to fetch confdir status");return a.data};export{b as a,i as b,u as c,w as d,k as e,m as f,s as g,R as h,l as i,g as j,U as k,o as l,c as m,y as n,p as o,d as p,f as q,h as r,E as s,X as t,C as u,x as v,S as w,P as x};
