const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-CrEo96R1.js","assets/index-CQX3EoD5.js","assets/index-CrFD7or9.css","assets/useQuery-C0C-eXPW.js","assets/client-BaiZ__5U.js","assets/useToast-Cuy1vR7C.js","assets/cn-BLSKlp9E.js","assets/useXray-D5MW9Vln.js","assets/useMutation-Ch66GYdT.js","assets/xray-DD0T2Jgq.js","assets/formatters-CEEtD2TU.js","assets/Badge-Cslqs6nY.js","assets/Spinner-BmqkSA94.js","assets/useTranslation-B0JWjKBP.js","assets/wifi-Bp_zlfia.js","assets/Button-f0Mse7Mf.js","assets/shield-check-C7Tom_7n.js","assets/xrayUpdatePreflight-D6qaceO-.js","assets/ConfirmDialog-DnJ6Ri1R.js","assets/lock-dT0VPNP1.js","assets/settings-0XL6jDAP.js","assets/copy-B4rXlJXn.js","assets/Skeleton-MkL4O98D.js","assets/users-BE_ybRco.js","assets/activity-CGDgtR_y.js","assets/Users-DaNk_DcH.js","assets/users-cEtzu60x.js","assets/index.esm-Bj1Hr71l.js","assets/useGroups-DvlDyXX4.js","assets/inbounds-EOaYwp-5.js","assets/useUsers-BKxk63fQ.js","assets/Input-BSEbceJR.js","assets/download-fALDNjyw.js","assets/index-Br6s-nJP.js","assets/MyanmarPriorityPreviewModal-BF4f13rk.js","assets/external-link-BUm7bF3d.js","assets/chevron-up-CCT6VfO3.js","assets/chevron-down-BMFMS569.js","assets/more-vertical-Dew8K1Qc.js","assets/useDebouncedValue-CzC77k1n.js","assets/useSmartAutoRefresh-BeyFLb8E.js","assets/plus-Deou6ppn.js","assets/search-QDJu2k36.js","assets/Groups-CSR3kxlQ.js","assets/layers-3-64ssOvd_.js","assets/sparkles-2cYCl5fR.js","assets/trash-2-DkPJD8AF.js","assets/UserDetail-Cfb9YqvN.js","assets/InboundClientProfileModal-CZzPW5L1.js","assets/qr-code-CVdDPxqs.js","assets/layout-dashboard-BaZHCOQy.js","assets/pen-square-CC1MoPC2.js","assets/file-code-2--MXT1a0X.js","assets/arrow-up-BBy3Q5vD.js","assets/Inbounds-BRL-NRT6.js","assets/arrow-right-Ca4QByBR.js","assets/Settings-D0dcSiSo.js","assets/server-BFcWa1mz.js"])))=>i.map(i=>d[i]);
import{_ as a,q as r}from"./index-CQX3EoD5.js";import{apiClient as D}from"./client-BaiZ__5U.js";import{u,g as d}from"./users-cEtzu60x.js";import{i as g}from"./inbounds-EOaYwp-5.js";import{g as P}from"./xray-DD0T2Jgq.js";const R={"/dashboard":()=>a(()=>import("./Dashboard-CrEo96R1.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])),"/users":()=>a(()=>import("./Users-DaNk_DcH.js"),__vite__mapDeps([25,1,2,8,26,4,15,6,5,27,28,3,29,30,31,13,32,33,34,21,35,11,18,10,36,37,38,39,40,22,23,41,42,9])),"/groups":()=>a(()=>import("./Groups-CSR3kxlQ.js"),__vite__mapDeps([43,1,2,11,6,15,5,31,18,39,28,3,29,4,8,26,30,13,41,44,45,42,14,46])),"/users/:id":()=>a(()=>import("./UserDetail-Cfb9YqvN.js"),__vite__mapDeps([47,1,2,4,11,6,15,5,18,48,33,3,12,13,21,32,49,34,27,28,29,8,26,30,31,22,10,50,51,45,46,38,52,53,35])),"/inbounds":()=>a(()=>import("./Inbounds-BRL-NRT6.js"),__vite__mapDeps([54,1,2,3,8,11,6,15,5,18,48,33,4,12,13,21,32,49,55,27,31,16,41,46,26,40,30,22,45,37,52,51,38])),"/settings":()=>a(()=>import("./Settings-D0dcSiSo.js").then(e=>e.a),__vite__mapDeps([56,1,2,22,6,13,19,57,24]))},l={page:1,limit:50,search:"",status:void 0},p={page:1,limit:20,search:"",includeDisabled:!0},f={page:1,limit:20,search:""},h=2e4,m=new Set,_=new Map;function v(e){return e.startsWith("/users/")?"/users/:id":e.startsWith("/groups/")?"/groups":e}function E(e){const s=e.match(/^\/users\/(\d+)$/);if(!s)return null;const t=Number.parseInt(s[1],10);return!Number.isInteger(t)||t<=0?null:t}const A={"/dashboard":async()=>{const[e,s]=await Promise.allSettled([D.get("/users/stats"),P()]);e.status==="fulfilled"&&r.setQueryData(["system-stats"],e.value),s.status==="fulfilled"&&r.setQueryData(["online-users"],s.value)},"/users":async()=>{const e=await u.getUsers(l);r.setQueryData(["users",l],e)},"/groups":async()=>{const[e,s]=await Promise.all([d.list(p),d.listTemplates(f)]);r.setQueryData(["groups",p],e),r.setQueryData(["group-policy-templates",f],s)},"/inbounds":async()=>{const e=await g.getInbounds();r.setQueryData(["inbounds"],e.data??[])},"/users/:id":async e=>{const s=E(e);if(!s)return;const[t,o]=await Promise.all([u.getUserById(s),u.getUserDevices(s,60)]);r.setQueryData(["user",s],t),r.setQueryData(["user-devices",s,60],o)}};function w(e,s={}){const t=v(e),o=s.includeData??!0,i=s.force??!1,n=R[t];if(n&&(i||!m.has(t))&&(m.add(t),n()),!o)return;const c=A[t];if(!c)return;const y=_.get(e)??0;!i&&Date.now()-y<h||(_.set(e,Date.now()),c(e).catch(()=>{}))}export{w as p};
