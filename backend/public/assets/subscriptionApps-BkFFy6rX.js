function y(t){return Array.from(new Set(t.map(o=>String(o||"").trim()).filter(Boolean)))}const g=[{id:"v2rayng",name:"V2RayNG",icon:"ðŸš€",platforms:["android"],description:"Fast V2Ray client for Android.",usesFormat:"v2ray",urlScheme:"v2rayng://install-sub?url={url}",storeUrl:{android:"https://play.google.com/store/apps/details?id=com.v2ray.ang"}},{id:"hiddify",name:"Hiddify",icon:"ðŸ›¡ï¸",platforms:["android","ios","windows"],description:"User-friendly client with strong anti-DPI support.",usesFormat:"v2ray",urlScheme:"hiddify://import/{rawUrl}",storeUrl:{android:"https://play.google.com/store/apps/details?id=app.hiddify.com",ios:"https://apps.apple.com/app/hiddify-proxy-vpn/id6596777532",windows:"https://github.com/hiddify/hiddify-next/releases/latest"}},{id:"clash",name:"Clash",icon:"âš¡",platforms:["android","windows"],description:"Profiles-based client (Clash/Meta ecosystem).",usesFormat:"clash",urlScheme:"clash://install-config?url={url}",storeUrl:{android:"https://github.com/MetaCubeX/ClashMetaForAndroid/releases/latest",windows:"https://github.com/MetaCubeX/mihomo/releases/latest"}},{id:"shadowrocket",name:"Shadowrocket",icon:"ðŸ›°ï¸",platforms:["ios"],description:"Popular iOS client.",usesFormat:"v2ray",urlScheme:"shadowrocket://add/sub?url={url}",storeUrl:{ios:"https://apps.apple.com/app/shadowrocket/id932747118"}},{id:"v2box",name:"V2Box",icon:"ðŸ“¦",platforms:["ios"],description:"Modern iOS client with subscription support.",usesFormat:"v2ray",urlScheme:"v2box://install-sub?url={url}",storeUrl:{ios:"https://apps.apple.com/app/v2box-v2ray-client/id6446814690"}},{id:"v2rayn",name:"v2rayN",icon:"ðŸ’»",platforms:["windows"],description:"Windows client (import the URL inside the app).",usesFormat:"v2ray",storeUrl:{windows:"https://github.com/2dust/v2rayN/releases/latest"}}];function S(){if(typeof window>"u")return"windows";const t=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(t)?"ios":/android/.test(t)?"android":"windows"}function U(t,o){if(!t||!o)return null;const s=String(o).trim(),i=encodeURIComponent(s);return t.includes("{rawUrl}")?t.replace("{rawUrl}",s):t.replace("{url}",i)}function b(t){const o=String(t.appId||"").toLowerCase(),s=String(t.importUrl||"").trim(),i=String(t.manualUrl||"").trim(),e=[];if(s&&e.push(s),o==="hiddify"&&i){const n=encodeURIComponent(i);e.push(`hiddify://install-config?url=${n}`),e.push(`hiddify://install-sub?url=${n}`)}return y(e)}function v(t){var a;const{platform:o,urls:s,metadata:i}=t,e=Array.isArray(i==null?void 0:i.enabledApps)?(a=i==null?void 0:i.enabledApps)==null?void 0:a.filter(r=>typeof r=="string"):null,n=g.filter(r=>r.platforms.includes(o)),p=e?n.filter(r=>e.includes(r.id)):n,u=Array.isArray(i==null?void 0:i.customApps)?i.customApps.filter(r=>r&&typeof r=="object").filter(r=>Array.isArray(r.platforms)&&r.platforms.includes(o)).map(r=>({id:String(r.id||""),name:String(r.name||""),icon:String(r.icon||"ðŸ”—"),platforms:r.platforms,description:String(r.description||"Custom client"),usesFormat:r.usesFormat,urlScheme:String(r.urlScheme||r.importScheme||""),storeUrl:r.storeUrl})).filter(r=>r.id&&r.name&&r.urlScheme):[],m=[...p,...u],f=r=>String(s[r||"v2ray"]||"");return m.map(r=>{var d,c;const l=f(r.usesFormat),h=U(r.urlScheme,l),w=(d=r.storeUrl)!=null&&d[o]?String((c=r.storeUrl)==null?void 0:c[o]):"";return{...r,importUrl:h,manualUrl:l,storeLink:w}})}export{g as B,b,S as d,v as r};
