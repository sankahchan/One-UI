import{c as lt,r as k,j as o,i as Mt,l as $e,I as Ft,a as Dt,C as ve}from"./index-CG9kpP9Y.js";import{u as Ee}from"./useQuery-ClalJbNF.js";import{u as _t}from"./useMutation-Br-t0osD.js";import{B as L}from"./Button-B80QVKRC.js";import{u as zt,C as $}from"./useToast-C_OO-2JX.js";import{C as ae,c as Ot}from"./clipboard-D_hUxpVN.js";import{S as Ht,o as Kt}from"./deepLink-V1nSjne_.js";import{d as Qt,r as Yt,b as Gt}from"./subscriptionApps-BkFFy6rX.js";import{u as Jt,R as qt}from"./useTranslation-DQjABgHn.js";import{S as Ze}from"./shield-check-Cc_ybT-Z.js";import{A as Wt}from"./arrow-up-C-Gbu-3p.js";import{A as Xt}from"./arrow-down-CRYy1JIM.js";import{Q as et}from"./qr-code-BvM-7NwP.js";import{D as tt}from"./download-CX5md0Yg.js";import{E as ie}from"./external-link-CxefftMD.js";import"./cn-BLSKlp9E.js";/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=lt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=lt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var ne={},Zt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},at={},U={};let Ue;const en=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];U.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};U.getSymbolTotalCodewords=function(t){return en[t]};U.getBCHDigit=function(n){let t=0;for(;n!==0;)t++,n>>>=1;return t};U.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Ue=t};U.isKanjiModeEnabled=function(){return typeof Ue<"u"};U.toSJIS=function(t){return Ue(t)};var ge={};(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+e)}}n.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},n.from=function(s,r){if(n.isValid(s))return s;try{return t(s)}catch{return r}}})(ge);function it(){this.buffer=[],this.length=0}it.prototype={get:function(n){const t=Math.floor(n/8);return(this.buffer[t]>>>7-n%8&1)===1},put:function(n,t){for(let e=0;e<t;e++)this.putBit((n>>>t-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),n&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var tn=it;function re(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}re.prototype.set=function(n,t,e,s){const r=n*this.size+t;this.data[r]=e,s&&(this.reservedBit[r]=!0)};re.prototype.get=function(n,t){return this.data[n*this.size+t]};re.prototype.xor=function(n,t,e){this.data[n*this.size+t]^=e};re.prototype.isReserved=function(n,t){return this.reservedBit[n*this.size+t]};var nn=re,ct={};(function(n){const t=U.getSymbolSize;n.getRowColCoords=function(s){if(s===1)return[];const r=Math.floor(s/7)+2,l=t(s),a=l===145?26:Math.ceil((l-13)/(2*r-2))*2,c=[l-7];for(let i=1;i<r-1;i++)c[i]=c[i-1]-a;return c.push(6),c.reverse()},n.getPositions=function(s){const r=[],l=n.getRowColCoords(s),a=l.length;for(let c=0;c<a;c++)for(let i=0;i<a;i++)c===0&&i===0||c===0&&i===a-1||c===a-1&&i===0||r.push([l[c],l[i]]);return r}})(ct);var ut={};const rn=U.getSymbolSize,rt=7;ut.getPositions=function(t){const e=rn(t);return[[0,0],[e-rt,0],[0,e-rt]]};var dt={};(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};n.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},n.from=function(r){return n.isValid(r)?parseInt(r,10):void 0},n.getPenaltyN1=function(r){const l=r.size;let a=0,c=0,i=0,f=null,h=null;for(let B=0;B<l;B++){c=i=0,f=h=null;for(let p=0;p<l;p++){let g=r.get(B,p);g===f?c++:(c>=5&&(a+=t.N1+(c-5)),f=g,c=1),g=r.get(p,B),g===h?i++:(i>=5&&(a+=t.N1+(i-5)),h=g,i=1)}c>=5&&(a+=t.N1+(c-5)),i>=5&&(a+=t.N1+(i-5))}return a},n.getPenaltyN2=function(r){const l=r.size;let a=0;for(let c=0;c<l-1;c++)for(let i=0;i<l-1;i++){const f=r.get(c,i)+r.get(c,i+1)+r.get(c+1,i)+r.get(c+1,i+1);(f===4||f===0)&&a++}return a*t.N2},n.getPenaltyN3=function(r){const l=r.size;let a=0,c=0,i=0;for(let f=0;f<l;f++){c=i=0;for(let h=0;h<l;h++)c=c<<1&2047|r.get(f,h),h>=10&&(c===1488||c===93)&&a++,i=i<<1&2047|r.get(h,f),h>=10&&(i===1488||i===93)&&a++}return a*t.N3},n.getPenaltyN4=function(r){let l=0;const a=r.data.length;for(let i=0;i<a;i++)l+=r.data[i];return Math.abs(Math.ceil(l*100/a/5)-10)*t.N4};function e(s,r,l){switch(s){case n.Patterns.PATTERN000:return(r+l)%2===0;case n.Patterns.PATTERN001:return r%2===0;case n.Patterns.PATTERN010:return l%3===0;case n.Patterns.PATTERN011:return(r+l)%3===0;case n.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(l/3))%2===0;case n.Patterns.PATTERN101:return r*l%2+r*l%3===0;case n.Patterns.PATTERN110:return(r*l%2+r*l%3)%2===0;case n.Patterns.PATTERN111:return(r*l%3+(r+l)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}n.applyMask=function(r,l){const a=l.size;for(let c=0;c<a;c++)for(let i=0;i<a;i++)l.isReserved(i,c)||l.xor(i,c,e(r,i,c))},n.getBestMask=function(r,l){const a=Object.keys(n.Patterns).length;let c=0,i=1/0;for(let f=0;f<a;f++){l(f),n.applyMask(f,r);const h=n.getPenaltyN1(r)+n.getPenaltyN2(r)+n.getPenaltyN3(r)+n.getPenaltyN4(r);n.applyMask(f,r),h<i&&(i=h,c=f)}return c}})(dt);var xe={};const z=ge,ce=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ue=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];xe.getBlocksCount=function(t,e){switch(e){case z.L:return ce[(t-1)*4+0];case z.M:return ce[(t-1)*4+1];case z.Q:return ce[(t-1)*4+2];case z.H:return ce[(t-1)*4+3];default:return}};xe.getTotalCodewordsCount=function(t,e){switch(e){case z.L:return ue[(t-1)*4+0];case z.M:return ue[(t-1)*4+1];case z.Q:return ue[(t-1)*4+2];case z.H:return ue[(t-1)*4+3];default:return}};var ft={},we={};const ee=new Uint8Array(512),me=new Uint8Array(256);(function(){let t=1;for(let e=0;e<255;e++)ee[e]=t,me[t]=e,t<<=1,t&256&&(t^=285);for(let e=255;e<512;e++)ee[e]=ee[e-255]})();we.log=function(t){if(t<1)throw new Error("log("+t+")");return me[t]};we.exp=function(t){return ee[t]};we.mul=function(t,e){return t===0||e===0?0:ee[me[t]+me[e]]};(function(n){const t=we;n.mul=function(s,r){const l=new Uint8Array(s.length+r.length-1);for(let a=0;a<s.length;a++)for(let c=0;c<r.length;c++)l[a+c]^=t.mul(s[a],r[c]);return l},n.mod=function(s,r){let l=new Uint8Array(s);for(;l.length-r.length>=0;){const a=l[0];for(let i=0;i<r.length;i++)l[i]^=t.mul(r[i],a);let c=0;for(;c<l.length&&l[c]===0;)c++;l=l.slice(c)}return l},n.generateECPolynomial=function(s){let r=new Uint8Array([1]);for(let l=0;l<s;l++)r=n.mul(r,new Uint8Array([1,t.exp(l)]));return r}})(ft);const ht=ft;function Me(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}Me.prototype.initialize=function(t){this.degree=t,this.genPoly=ht.generateECPolynomial(this.degree)};Me.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const s=ht.mod(e,this.genPoly),r=this.degree-s.length;if(r>0){const l=new Uint8Array(this.degree);return l.set(s,r),l}return s};var sn=Me,mt={},O={},Fe={};Fe.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var D={};const pt="[0-9]+",on="[A-Z $%*+\\-./:]+";let te="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";te=te.replace(/u/g,"\\u");const ln="(?:(?![A-Z0-9 $%*+\\-./:]|"+te+`)(?:.|[\r
]))+`;D.KANJI=new RegExp(te,"g");D.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");D.BYTE=new RegExp(ln,"g");D.NUMERIC=new RegExp(pt,"g");D.ALPHANUMERIC=new RegExp(on,"g");const an=new RegExp("^"+te+"$"),cn=new RegExp("^"+pt+"$"),un=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");D.testKanji=function(t){return an.test(t)};D.testNumeric=function(t){return cn.test(t)};D.testAlphanumeric=function(t){return un.test(t)};(function(n){const t=Fe,e=D;n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(l,a){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!t.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?l.ccBits[0]:a<27?l.ccBits[1]:l.ccBits[2]},n.getBestModeForData=function(l){return e.testNumeric(l)?n.NUMERIC:e.testAlphanumeric(l)?n.ALPHANUMERIC:e.testKanji(l)?n.KANJI:n.BYTE},n.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},n.isValid=function(l){return l&&l.bit&&l.ccBits};function s(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+r)}}n.from=function(l,a){if(n.isValid(l))return l;try{return s(l)}catch{return a}}})(O);(function(n){const t=U,e=xe,s=ge,r=O,l=Fe,a=7973,c=t.getBCHDigit(a);function i(p,g,j){for(let C=1;C<=40;C++)if(g<=n.getCapacity(C,j,p))return C}function f(p,g){return r.getCharCountIndicator(p,g)+4}function h(p,g){let j=0;return p.forEach(function(C){const T=f(C.mode,g);j+=T+C.getBitsLength()}),j}function B(p,g){for(let j=1;j<=40;j++)if(h(p,j)<=n.getCapacity(j,g,r.MIXED))return j}n.from=function(g,j){return l.isValid(g)?parseInt(g,10):j},n.getCapacity=function(g,j,C){if(!l.isValid(g))throw new Error("Invalid QR Code version");typeof C>"u"&&(C=r.BYTE);const T=t.getSymbolTotalCodewords(g),w=e.getTotalCodewordsCount(g,j),d=(T-w)*8;if(C===r.MIXED)return d;const b=d-f(C,g);switch(C){case r.NUMERIC:return Math.floor(b/10*3);case r.ALPHANUMERIC:return Math.floor(b/11*2);case r.KANJI:return Math.floor(b/13);case r.BYTE:default:return Math.floor(b/8)}},n.getBestVersionForData=function(g,j){let C;const T=s.from(j,s.M);if(Array.isArray(g)){if(g.length>1)return B(g,T);if(g.length===0)return 1;C=g[0]}else C=g;return i(C.mode,C.getLength(),T)},n.getEncodedBits=function(g){if(!l.isValid(g)||g<7)throw new Error("Invalid QR Code version");let j=g<<12;for(;t.getBCHDigit(j)-c>=0;)j^=a<<t.getBCHDigit(j)-c;return g<<12|j}})(mt);var gt={};const Ie=U,xt=1335,dn=21522,st=Ie.getBCHDigit(xt);gt.getEncodedBits=function(t,e){const s=t.bit<<3|e;let r=s<<10;for(;Ie.getBCHDigit(r)-st>=0;)r^=xt<<Ie.getBCHDigit(r)-st;return(s<<10|r)^dn};var wt={};const fn=O;function Y(n){this.mode=fn.NUMERIC,this.data=n.toString()}Y.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Y.prototype.getLength=function(){return this.data.length};Y.prototype.getBitsLength=function(){return Y.getBitsLength(this.data.length)};Y.prototype.write=function(t){let e,s,r;for(e=0;e+3<=this.data.length;e+=3)s=this.data.substr(e,3),r=parseInt(s,10),t.put(r,10);const l=this.data.length-e;l>0&&(s=this.data.substr(e),r=parseInt(s,10),t.put(r,l*3+1))};var hn=Y;const mn=O,Ae=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function G(n){this.mode=mn.ALPHANUMERIC,this.data=n}G.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};G.prototype.getLength=function(){return this.data.length};G.prototype.getBitsLength=function(){return G.getBitsLength(this.data.length)};G.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let s=Ae.indexOf(this.data[e])*45;s+=Ae.indexOf(this.data[e+1]),t.put(s,11)}this.data.length%2&&t.put(Ae.indexOf(this.data[e]),6)};var pn=G;const gn=O;function J(n){this.mode=gn.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}J.getBitsLength=function(t){return t*8};J.prototype.getLength=function(){return this.data.length};J.prototype.getBitsLength=function(){return J.getBitsLength(this.data.length)};J.prototype.write=function(n){for(let t=0,e=this.data.length;t<e;t++)n.put(this.data[t],8)};var xn=J;const wn=O,yn=U;function q(n){this.mode=wn.KANJI,this.data=n}q.getBitsLength=function(t){return t*13};q.prototype.getLength=function(){return this.data.length};q.prototype.getBitsLength=function(){return q.getBitsLength(this.data.length)};q.prototype.write=function(n){let t;for(t=0;t<this.data.length;t++){let e=yn.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),n.put(e,13)}};var bn=q,yt={exports:{}};(function(n){var t={single_source_shortest_paths:function(e,s,r){var l={},a={};a[s]=0;var c=t.PriorityQueue.make();c.push(s,0);for(var i,f,h,B,p,g,j,C,T;!c.empty();){i=c.pop(),f=i.value,B=i.cost,p=e[f]||{};for(h in p)p.hasOwnProperty(h)&&(g=p[h],j=B+g,C=a[h],T=typeof a[h]>"u",(T||C>j)&&(a[h]=j,c.push(h,j),l[h]=f))}if(typeof r<"u"&&typeof a[r]>"u"){var w=["Could not find a path from ",s," to ",r,"."].join("");throw new Error(w)}return l},extract_shortest_path_from_predecessor_list:function(e,s){for(var r=[],l=s;l;)r.push(l),e[l],l=e[l];return r.reverse(),r},find_path:function(e,s,r){var l=t.single_source_shortest_paths(e,s,r);return t.extract_shortest_path_from_predecessor_list(l,r)},PriorityQueue:{make:function(e){var s=t.PriorityQueue,r={},l;e=e||{};for(l in s)s.hasOwnProperty(l)&&(r[l]=s[l]);return r.queue=[],r.sorter=e.sorter||s.default_sorter,r},default_sorter:function(e,s){return e.cost-s.cost},push:function(e,s){var r={value:e,cost:s};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=t})(yt);var Nn=yt.exports;(function(n){const t=O,e=hn,s=pn,r=xn,l=bn,a=D,c=U,i=Nn;function f(w){return unescape(encodeURIComponent(w)).length}function h(w,d,b){const y=[];let A;for(;(A=w.exec(b))!==null;)y.push({data:A[0],index:A.index,mode:d,length:A[0].length});return y}function B(w){const d=h(a.NUMERIC,t.NUMERIC,w),b=h(a.ALPHANUMERIC,t.ALPHANUMERIC,w);let y,A;return c.isKanjiModeEnabled()?(y=h(a.BYTE,t.BYTE,w),A=h(a.KANJI,t.KANJI,w)):(y=h(a.BYTE_KANJI,t.BYTE,w),A=[]),d.concat(b,y,A).sort(function(V,S){return V.index-S.index}).map(function(V){return{data:V.data,mode:V.mode,length:V.length}})}function p(w,d){switch(d){case t.NUMERIC:return e.getBitsLength(w);case t.ALPHANUMERIC:return s.getBitsLength(w);case t.KANJI:return l.getBitsLength(w);case t.BYTE:return r.getBitsLength(w)}}function g(w){return w.reduce(function(d,b){const y=d.length-1>=0?d[d.length-1]:null;return y&&y.mode===b.mode?(d[d.length-1].data+=b.data,d):(d.push(b),d)},[])}function j(w){const d=[];for(let b=0;b<w.length;b++){const y=w[b];switch(y.mode){case t.NUMERIC:d.push([y,{data:y.data,mode:t.ALPHANUMERIC,length:y.length},{data:y.data,mode:t.BYTE,length:y.length}]);break;case t.ALPHANUMERIC:d.push([y,{data:y.data,mode:t.BYTE,length:y.length}]);break;case t.KANJI:d.push([y,{data:y.data,mode:t.BYTE,length:f(y.data)}]);break;case t.BYTE:d.push([{data:y.data,mode:t.BYTE,length:f(y.data)}])}}return d}function C(w,d){const b={},y={start:{}};let A=["start"];for(let v=0;v<w.length;v++){const V=w[v],S=[];for(let F=0;F<V.length;F++){const M=V[F],_=""+v+F;S.push(_),b[_]={node:M,lastCount:0},y[_]={};for(let x=0;x<A.length;x++){const m=A[x];b[m]&&b[m].node.mode===M.mode?(y[m][_]=p(b[m].lastCount+M.length,M.mode)-p(b[m].lastCount,M.mode),b[m].lastCount+=M.length):(b[m]&&(b[m].lastCount=M.length),y[m][_]=p(M.length,M.mode)+4+t.getCharCountIndicator(M.mode,d))}}A=S}for(let v=0;v<A.length;v++)y[A[v]].end=0;return{map:y,table:b}}function T(w,d){let b;const y=t.getBestModeForData(w);if(b=t.from(d,y),b!==t.BYTE&&b.bit<y.bit)throw new Error('"'+w+'" cannot be encoded with mode '+t.toString(b)+`.
 Suggested mode is: `+t.toString(y));switch(b===t.KANJI&&!c.isKanjiModeEnabled()&&(b=t.BYTE),b){case t.NUMERIC:return new e(w);case t.ALPHANUMERIC:return new s(w);case t.KANJI:return new l(w);case t.BYTE:return new r(w)}}n.fromArray=function(d){return d.reduce(function(b,y){return typeof y=="string"?b.push(T(y,null)):y.data&&b.push(T(y.data,y.mode)),b},[])},n.fromString=function(d,b){const y=B(d,c.isKanjiModeEnabled()),A=j(y),v=C(A,b),V=i.find_path(v.map,"start","end"),S=[];for(let F=1;F<V.length-1;F++)S.push(v.table[V[F]].node);return n.fromArray(g(S))},n.rawSplit=function(d){return n.fromArray(B(d,c.isKanjiModeEnabled()))}})(wt);const ye=U,Be=ge,jn=tn,Cn=nn,vn=ct,En=ut,Le=dt,Re=xe,An=sn,pe=mt,Bn=gt,kn=O,ke=wt;function Tn(n,t){const e=n.size,s=En.getPositions(t);for(let r=0;r<s.length;r++){const l=s[r][0],a=s[r][1];for(let c=-1;c<=7;c++)if(!(l+c<=-1||e<=l+c))for(let i=-1;i<=7;i++)a+i<=-1||e<=a+i||(c>=0&&c<=6&&(i===0||i===6)||i>=0&&i<=6&&(c===0||c===6)||c>=2&&c<=4&&i>=2&&i<=4?n.set(l+c,a+i,!0,!0):n.set(l+c,a+i,!1,!0))}}function Vn(n){const t=n.size;for(let e=8;e<t-8;e++){const s=e%2===0;n.set(e,6,s,!0),n.set(6,e,s,!0)}}function Sn(n,t){const e=vn.getPositions(t);for(let s=0;s<e.length;s++){const r=e[s][0],l=e[s][1];for(let a=-2;a<=2;a++)for(let c=-2;c<=2;c++)a===-2||a===2||c===-2||c===2||a===0&&c===0?n.set(r+a,l+c,!0,!0):n.set(r+a,l+c,!1,!0)}}function In(n,t){const e=n.size,s=pe.getEncodedBits(t);let r,l,a;for(let c=0;c<18;c++)r=Math.floor(c/3),l=c%3+e-8-3,a=(s>>c&1)===1,n.set(r,l,a,!0),n.set(l,r,a,!0)}function Te(n,t,e){const s=n.size,r=Bn.getEncodedBits(t,e);let l,a;for(l=0;l<15;l++)a=(r>>l&1)===1,l<6?n.set(l,8,a,!0):l<8?n.set(l+1,8,a,!0):n.set(s-15+l,8,a,!0),l<8?n.set(8,s-l-1,a,!0):l<9?n.set(8,15-l-1+1,a,!0):n.set(8,15-l-1,a,!0);n.set(s-8,8,1,!0)}function Ln(n,t){const e=n.size;let s=-1,r=e-1,l=7,a=0;for(let c=e-1;c>0;c-=2)for(c===6&&c--;;){for(let i=0;i<2;i++)if(!n.isReserved(r,c-i)){let f=!1;a<t.length&&(f=(t[a]>>>l&1)===1),n.set(r,c-i,f),l--,l===-1&&(a++,l=7)}if(r+=s,r<0||e<=r){r-=s,s=-s;break}}}function Rn(n,t,e){const s=new jn;e.forEach(function(i){s.put(i.mode.bit,4),s.put(i.getLength(),kn.getCharCountIndicator(i.mode,n)),i.write(s)});const r=ye.getSymbolTotalCodewords(n),l=Re.getTotalCodewordsCount(n,t),a=(r-l)*8;for(s.getLengthInBits()+4<=a&&s.put(0,4);s.getLengthInBits()%8!==0;)s.putBit(0);const c=(a-s.getLengthInBits())/8;for(let i=0;i<c;i++)s.put(i%2?17:236,8);return Pn(s,n,t)}function Pn(n,t,e){const s=ye.getSymbolTotalCodewords(t),r=Re.getTotalCodewordsCount(t,e),l=s-r,a=Re.getBlocksCount(t,e),c=s%a,i=a-c,f=Math.floor(s/a),h=Math.floor(l/a),B=h+1,p=f-h,g=new An(p);let j=0;const C=new Array(a),T=new Array(a);let w=0;const d=new Uint8Array(n.buffer);for(let V=0;V<a;V++){const S=V<i?h:B;C[V]=d.slice(j,j+S),T[V]=g.encode(C[V]),j+=S,w=Math.max(w,S)}const b=new Uint8Array(s);let y=0,A,v;for(A=0;A<w;A++)for(v=0;v<a;v++)A<C[v].length&&(b[y++]=C[v][A]);for(A=0;A<p;A++)for(v=0;v<a;v++)b[y++]=T[v][A];return b}function Un(n,t,e,s){let r;if(Array.isArray(n))r=ke.fromArray(n);else if(typeof n=="string"){let f=t;if(!f){const h=ke.rawSplit(n);f=pe.getBestVersionForData(h,e)}r=ke.fromString(n,f||40)}else throw new Error("Invalid data");const l=pe.getBestVersionForData(r,e);if(!l)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=l;else if(t<l)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+l+`.
`);const a=Rn(t,e,r),c=ye.getSymbolSize(t),i=new Cn(c);return Tn(i,t),Vn(i),Sn(i,t),Te(i,e,0),t>=7&&In(i,t),Ln(i,a),isNaN(s)&&(s=Le.getBestMask(i,Te.bind(null,i,e))),Le.applyMask(s,i),Te(i,e,s),{modules:i,version:t,errorCorrectionLevel:e,maskPattern:s,segments:r}}at.create=function(t,e){if(typeof t>"u"||t==="")throw new Error("No input text");let s=Be.M,r,l;return typeof e<"u"&&(s=Be.from(e.errorCorrectionLevel,Be.M),r=pe.from(e.version),l=Le.from(e.maskPattern),e.toSJISFunc&&ye.setToSJISFunction(e.toSJISFunc)),Un(t,r,s,l)};var bt={},De={};(function(n){function t(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let s=e.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+e);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(l){return[l,l]}))),s.length===6&&s.push("F","F");const r=parseInt(s.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+s.slice(0,6).join("")}}n.getOptions=function(s){s||(s={}),s.color||(s.color={});const r=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,l=s.width&&s.width>=21?s.width:void 0,a=s.scale||4;return{width:l,scale:l?4:a,margin:r,color:{dark:t(s.color.dark||"#000000ff"),light:t(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},n.getScale=function(s,r){return r.width&&r.width>=s+r.margin*2?r.width/(s+r.margin*2):r.scale},n.getImageWidth=function(s,r){const l=n.getScale(s,r);return Math.floor((s+r.margin*2)*l)},n.qrToImageData=function(s,r,l){const a=r.modules.size,c=r.modules.data,i=n.getScale(a,l),f=Math.floor((a+l.margin*2)*i),h=l.margin*i,B=[l.color.light,l.color.dark];for(let p=0;p<f;p++)for(let g=0;g<f;g++){let j=(p*f+g)*4,C=l.color.light;if(p>=h&&g>=h&&p<f-h&&g<f-h){const T=Math.floor((p-h)/i),w=Math.floor((g-h)/i);C=B[c[T*a+w]?1:0]}s[j++]=C.r,s[j++]=C.g,s[j++]=C.b,s[j]=C.a}}})(De);(function(n){const t=De;function e(r,l,a){r.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=a,l.width=a,l.style.height=a+"px",l.style.width=a+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(l,a,c){let i=c,f=a;typeof i>"u"&&(!a||!a.getContext)&&(i=a,a=void 0),a||(f=s()),i=t.getOptions(i);const h=t.getImageWidth(l.modules.size,i),B=f.getContext("2d"),p=B.createImageData(h,h);return t.qrToImageData(p.data,l,i),e(B,f,h),B.putImageData(p,0,0),f},n.renderToDataURL=function(l,a,c){let i=c;typeof i>"u"&&(!a||!a.getContext)&&(i=a,a=void 0),i||(i={});const f=n.render(l,a,i),h=i.type||"image/png",B=i.rendererOpts||{};return f.toDataURL(h,B.quality)}})(bt);var Nt={};const Mn=De;function ot(n,t){const e=n.a/255,s=t+'="'+n.hex+'"';return e<1?s+" "+t+'-opacity="'+e.toFixed(2).slice(1)+'"':s}function Ve(n,t,e){let s=n+t;return typeof e<"u"&&(s+=" "+e),s}function Fn(n,t,e){let s="",r=0,l=!1,a=0;for(let c=0;c<n.length;c++){const i=Math.floor(c%t),f=Math.floor(c/t);!i&&!l&&(l=!0),n[c]?(a++,c>0&&i>0&&n[c-1]||(s+=l?Ve("M",i+e,.5+f+e):Ve("m",r,0),r=0,l=!1),i+1<t&&n[c+1]||(s+=Ve("h",a),a=0)):r++}return s}Nt.render=function(t,e,s){const r=Mn.getOptions(e),l=t.modules.size,a=t.modules.data,c=l+r.margin*2,i=r.color.light.a?"<path "+ot(r.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",f="<path "+ot(r.color.dark,"stroke")+' d="'+Fn(a,l,r.margin)+'"/>',h='viewBox="0 0 '+c+" "+c+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+h+' shape-rendering="crispEdges">'+i+f+`</svg>
`;return typeof s=="function"&&s(null,p),p};const Dn=Zt,Pe=at,jt=bt,_n=Nt;function _e(n,t,e,s,r){const l=[].slice.call(arguments,1),a=l.length,c=typeof l[a-1]=="function";if(!c&&!Dn())throw new Error("Callback required as last argument");if(c){if(a<2)throw new Error("Too few arguments provided");a===2?(r=e,e=t,t=s=void 0):a===3&&(t.getContext&&typeof r>"u"?(r=s,s=void 0):(r=s,s=e,e=t,t=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(e=t,t=s=void 0):a===2&&!t.getContext&&(s=e,e=t,t=void 0),new Promise(function(i,f){try{const h=Pe.create(e,s);i(n(h,t,s))}catch(h){f(h)}})}try{const i=Pe.create(e,s);r(null,n(i,t,s))}catch(i){r(i)}}ne.create=Pe.create;ne.toCanvas=_e.bind(null,jt.render);ne.toDataURL=_e.bind(null,jt.renderToDataURL);ne.toString=_e.bind(null,function(n,t,e){return _n.render(n,e)});const Se=({text:n,size:t=200,logoUrl:e=null,logoSizePercent:s=22,className:r=""})=>{const l=k.useRef(null);return k.useEffect(()=>{const a=l.current;if(!a)return;const c=async()=>{if(!e)return;const i=a.getContext("2d");i&&await new Promise(f=>{const h=new Image;h.crossOrigin="anonymous",h.onload=()=>{const B=Math.min(Math.max(s,10),40),p=t*B/100,g=(t-p)/2,j=(t-p)/2;i.save(),i.beginPath(),i.arc(t/2,t/2,p/2+6,0,Math.PI*2),i.fillStyle="#ffffff",i.fill(),i.restore(),i.drawImage(h,g,j,p,p),f()},h.onerror=()=>f(),h.src=e})};ne.toCanvas(a,n,{width:t,margin:2,color:{dark:"#000000",light:"#ffffff"},errorCorrectionLevel:"H"},i=>{if(i){console.error("Error generating QR code:",i);return}c()})},[n,t,e,s]),o.jsx("canvas",{ref:l,className:r})},de=n=>{if(n===0)return"0 B";const t=1024,e=["B","KB","MB","GB","TB"],s=Math.floor(Math.log(n)/Math.log(t));return`${Number.parseFloat((n/t**s).toFixed(2))} ${e[s]}`};function zn(n){return""}function fe(n){if(!n)return null;const t=n.trim();return/^#[0-9a-fA-F]{6}$/.test(t)||/^#[0-9a-fA-F]{3}$/.test(t)?t:null}function he(n,t){const e=n.replace("#",""),s=e.length===3?e.split("").map(f=>`${f}${f}`).join(""):e,r=Number.parseInt(s,16),l=r>>16&255,a=r>>8&255,c=r&255,i=Math.min(Math.max(t,0),1);return`rgba(${l}, ${a}, ${c}, ${i})`}function On(n){if(!n||typeof n!="string")return null;const t=n.trim();if(!t)return null;try{const e=new URL(t);return["http:","https:"].includes(e.protocol)?e.toString():null}catch{return null}}function Z(n,t,e,s){const r=Number(n);return Number.isFinite(r)?Math.min(Math.max(r,t),e):s}const or=()=>{var Ye,Ge,Je,qe,We,Xe;const{token:n}=Mt(),t=zt(),{t:e,i18n:s}=Jt(),[r,l]=k.useState("android"),[a,c]=k.useState("v2ray"),[i,f]=k.useState(!1),[h,B]=k.useState(new Set),[p,g]=k.useState(""),[j]=k.useState(60),[C,T]=k.useState(null);k.useEffect(()=>{l(Qt())},[]);const w=zn(),{data:d,isLoading:b,error:y,refetch:A}=Ee({queryKey:["userInfo",n],queryFn:async()=>{const u=await fetch(`${w}/user/${n}/info`);if(!u.ok)throw new Error("Failed to load user info");return(await u.json()).data},enabled:!!n}),{data:v,refetch:V}=Ee({queryKey:["publicSubLinks",n],queryFn:async()=>{const u=await fetch(`${w}/sub/${n}/links`,{headers:{Accept:"application/json"}});if(!u.ok)throw new Error("Failed to load subscription links");return await u.json()},enabled:!!n}),{data:S,refetch:F,isFetching:M}=Ee({queryKey:["publicDevices",n,j],queryFn:async()=>{const u=await fetch(`${w}/user/${n}/devices?windowMinutes=${j}`,{headers:{Accept:"application/json"}});if(!u.ok)throw new Error("Failed to load devices");return await u.json()},enabled:!!n&&!!w,refetchInterval:12e3,staleTime:5e3}),_=_t({mutationFn:async u=>{const N=await fetch(`${w}/user/${n}/devices/${encodeURIComponent(u)}`,{method:"DELETE",headers:{Accept:"application/json"}});if(!N.ok){const E=await N.json().catch(()=>null);throw new Error((E==null?void 0:E.error)||e("portal.toast.revokeFailed",{defaultValue:"Failed to revoke device"}))}return await N.json()},onSuccess:async()=>{t.success(e("common.success",{defaultValue:"Success"}),e("portal.devicesRevoked",{defaultValue:"Device revoked."})),await F()},onError:u=>{t.error(e("common.error",{defaultValue:"Error"}),(u==null?void 0:u.message)||e("portal.toast.revokeFailed",{defaultValue:"Failed to revoke device"}))}}),x=(d==null?void 0:d.branding)||null,m=(x==null?void 0:x.metadata)||null,se=fe(x==null?void 0:x.accentColor)||"#22d3ee",oe=fe(x==null?void 0:x.primaryColor)||"#3b82f6",H=k.useMemo(()=>{var E,I,P;const u=((I=(E=v==null?void 0:v.data)==null?void 0:E.subscription)==null?void 0:I.urls)||{},N=((P=d==null?void 0:d.subscription)==null?void 0:P.url)||"";return{v2ray:u.v2ray||(N?`${N}?target=v2ray`:""),clash:u.clash||(N?`${N}?target=clash`:""),singbox:u.singbox||(N?`${N}?target=singbox`:""),wireguard:u.wireguard||(N?`${N}?target=wireguard`:""),mieru:u.mieru||(N?`${N}?target=mieru`:"")}},[v,(Ye=d==null?void 0:d.subscription)==null?void 0:Ye.url]),ze=((Ge=v==null?void 0:v.data)==null?void 0:Ge.shareUrl)||"",W=((Je=v==null?void 0:v.data)==null?void 0:Je.links)||[],Ct=k.useMemo(()=>{const u=String(s.resolvedLanguage||s.language||"en").toLowerCase().split("-")[0];return $e.some(N=>N.code===u)?u:"en"},[s.language,s.resolvedLanguage]),X=k.useMemo(()=>[{key:"v2ray",label:e("portal.formats.v2ray",{defaultValue:"V2Ray"})},{key:"clash",label:e("portal.formats.clash",{defaultValue:"Clash"})},{key:"singbox",label:e("portal.formats.singbox",{defaultValue:"Sing-box"})},{key:"wireguard",label:e("portal.formats.wireguard",{defaultValue:"WireGuard"})},{key:"mieru",label:e("portal.formats.mieru",{defaultValue:"Mieru"})}].filter(N=>!!H[N.key]),[e,H]),vt=u=>{const N=String(u||"").toUpperCase();return N?N==="NEVER"?e("portal.resetPeriods.never",{defaultValue:"never"}):e(`portal.resetPeriods.${N.toLowerCase()}`,{defaultValue:N.toLowerCase()}):""},Et=u=>{const N=String(u||"").toUpperCase(),E=`status.${N.toLowerCase()}`;return e(E,{defaultValue:N||u||"-"})},At=u=>u==="clash"?e("portal.subscription.formatHint.clash",{defaultValue:"Clash / Meta clients"}):u==="v2ray"?e("portal.subscription.formatHint.v2ray",{defaultValue:"V2Ray subscription"}):u==="singbox"?e("portal.subscription.formatHint.singbox",{defaultValue:"Sing-box subscription"}):u==="mieru"?e("portal.subscription.formatHint.mieru",{defaultValue:"Mieru YAML profile"}):e("portal.subscription.formatHint.wireguard",{defaultValue:"WireGuard subscription"}),Bt=u=>u==="android"?e("portal.addToApp.platform.android",{defaultValue:"Android"}):u==="ios"?e("portal.addToApp.platform.ios",{defaultValue:"iOS"}):e("portal.addToApp.platform.desktop",{defaultValue:"Desktop"});k.useEffect(()=>{if(X.length===0)return;X.some(N=>N.key===a)||c(X[0].key)},[a,X]);const K=H[a]||"",be=((qe=S==null?void 0:S.data)==null?void 0:qe.devices)||[],R=(S==null?void 0:S.data)||null,Q=async(u,N)=>{if(!u)return;if(await Ot(u)){g(N),window.setTimeout(()=>g(""),1600),t.success(e("common.copied",{defaultValue:"Copied"}),e("portal.linkCopied",{defaultValue:"Link copied to clipboard."}));return}t.error(e("common.error",{defaultValue:"Error"}),e("portal.copyFailed",{defaultValue:"Please copy manually."}))},kt=u=>{B(N=>{const E=new Set(N);return E.has(u)?E.delete(u):E.add(u),E})},Tt=k.useMemo(()=>Yt({platform:r,urls:H,metadata:m}),[r,H,m]),Vt=k.useMemo(()=>({backgroundImage:`linear-gradient(135deg, ${oe}, ${se})`}),[se,oe]),Oe=k.useMemo(()=>On(m==null?void 0:m.wallpaperUrl),[m==null?void 0:m.wallpaperUrl]),St=k.useMemo(()=>Z(m==null?void 0:m.wallpaperOverlayOpacity,10,90,62),[m==null?void 0:m.wallpaperOverlayOpacity]),Ne=k.useMemo(()=>Z(m==null?void 0:m.wallpaperBlurPx,0,24,0),[m==null?void 0:m.wallpaperBlurPx]),It=k.useMemo(()=>Z(m==null?void 0:m.wallpaperPositionX,0,100,50),[m]),Lt=k.useMemo(()=>Z(m==null?void 0:m.wallpaperPositionY,0,100,50),[m]),He=k.useMemo(()=>fe(m==null?void 0:m.wallpaperGradientFrom)||oe,[m,oe]),Ke=k.useMemo(()=>fe(m==null?void 0:m.wallpaperGradientTo)||se,[se,m]),le=k.useMemo(()=>Z(m==null?void 0:m.wallpaperGradientOpacity,0,100,62),[m]),Qe=!!Oe;if(b)return o.jsx("div",{className:"flex min-h-screen items-center justify-center",children:o.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-line/80 border-t-brand-500"})});if(y||!d)return o.jsx("div",{className:"flex min-h-screen items-center justify-center px-4 py-10",children:o.jsxs($,{className:"max-w-md text-center",children:[o.jsx("div",{className:"mx-auto mb-4 flex h-14 w-14 items-center justify-center rounded-2xl bg-rose-500/15 text-rose-400",children:o.jsx(Ft,{className:"h-7 w-7"})}),o.jsx("h2",{className:"text-xl font-bold text-foreground",children:e("portal.notFound.title",{defaultValue:"Subscription Not Found"})}),o.jsx("p",{className:"mt-2 text-sm text-muted",children:e("portal.notFound.body",{defaultValue:"The subscription token is invalid, expired, or has been revoked."})})]})});const je=(()=>{if(d.usage.limit<=0)return null;const u=m==null?void 0:m.usageAlertThresholds,E=(Array.isArray(u)&&u.length>0?u.map(I=>Number(I)).filter(I=>Number.isFinite(I)).sort((I,P)=>P-I):[95,90,80]).find(I=>d.usage.percent>=I);return E?E>=95?{label:e("portal.hero.usageAlert.almostOut",{defaultValue:"Almost out of data ({{percent}}%)",percent:E}),tone:"bg-rose-500/15 text-rose-200 border-rose-500/25"}:E>=90?{label:e("portal.hero.usageAlert.high",{defaultValue:"High usage ({{percent}}%)",percent:E}),tone:"bg-amber-500/15 text-amber-100 border-amber-500/25"}:{label:e("portal.hero.usageAlert.normal",{defaultValue:"Usage alert ({{percent}}%)",percent:E}),tone:"bg-sky-500/15 text-sky-100 border-sky-500/25"}:null})(),Ce=(()=>{const u=m==null?void 0:m.qrLogoSizePercent,N=typeof u=="number"?u:Number(u);if(Number.isFinite(N))return Math.min(Math.max(N,10),40)})(),Rt=async()=>{try{await Promise.all([A(),V()]),t.success(e("common.success",{defaultValue:"Success"}),e("portal.toast.refreshed",{defaultValue:"Subscription data refreshed."}))}catch(u){t.error(e("common.error",{defaultValue:"Error"}),(u==null?void 0:u.message)||e("portal.toast.refreshFailed",{defaultValue:"Unable to refresh."}))}},Pt=()=>{if(W.length===0){t.info(e("common.info",{defaultValue:"Info"}),e("portal.toast.noNodes",{defaultValue:"There are no node links to download."}));return}const u=W.map(P=>`# ${P.remark} [${P.protocol}] (${P.network}/${P.security})
${P.url}`).join(`

`),N=new Blob([u],{type:"text/plain"}),E=URL.createObjectURL(N),I=document.createElement("a");I.href=E,I.download=`one-ui-nodes-${n||"subscription"}.txt`,I.click(),URL.revokeObjectURL(E)};return o.jsxs("div",{className:"relative min-h-screen px-4 py-8 sm:px-6 lg:px-8",children:[Qe?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"pointer-events-none fixed inset-0 -z-20 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${Oe})`,backgroundPosition:`${It}% ${Lt}%`,filter:Ne>0?`blur(${Ne}px)`:void 0,transform:Ne>0?"scale(1.03)":void 0}}),o.jsx("div",{className:"pointer-events-none fixed inset-0 -z-10",style:{backgroundImage:`linear-gradient(135deg, ${he(He,le/100)} 0%, ${he(Ke,le/100)} 100%)`}}),o.jsx("div",{className:"pointer-events-none fixed inset-0 -z-10",style:{backgroundColor:`rgba(2, 6, 23, ${St/100})`}})]}):null,Qe?null:o.jsx("div",{className:"pointer-events-none fixed inset-0 -z-10",style:{backgroundImage:`linear-gradient(135deg, ${he(He,Math.min(Math.max(le/150,.2),.6))} 0%, ${he(Ke,Math.min(Math.max(le/130,.25),.7))} 100%)`}}),o.jsxs("div",{className:"mx-auto max-w-5xl space-y-6",children:[o.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[x!=null&&x.logoUrl?o.jsx("img",{src:x.logoUrl,alt:x.appName||e("portal.header.logoAlt",{defaultValue:"Logo"}),className:"h-12 w-12 rounded-2xl border border-line/70 bg-card object-contain p-2"}):o.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl border border-line/70 bg-card text-lg font-bold text-foreground",children:String((x==null?void 0:x.appName)||"One-UI").slice(0,1).toUpperCase()}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.32em] text-muted",children:(x==null?void 0:x.appName)||"One-UI"}),o.jsx("h1",{className:"text-2xl font-bold text-foreground sm:text-3xl",children:(x==null?void 0:x.profileTitle)||e("portal.header.defaultTitle",{defaultValue:"Subscription Center"})}),o.jsx("p",{className:"mt-1 text-sm text-muted",children:(x==null?void 0:x.profileDescription)||e("portal.header.defaultDescription",{defaultValue:"Import your subscription and manage your access."})})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs("label",{className:"flex items-center gap-2 rounded-xl border border-line/70 bg-card/70 px-3 py-2 text-sm text-foreground",children:[o.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-muted",children:e("portal.language",{defaultValue:"Language"})}),o.jsx("select",{value:Ct,onChange:u=>{Dt(u.target.value)},className:"rounded-md border border-line/60 bg-panel/70 px-2 py-1 text-sm text-foreground focus:border-brand-500/60 focus:outline-none focus:ring-2 focus:ring-brand-500/30","aria-label":e("portal.language",{defaultValue:"Language"}),children:$e.map(u=>o.jsx("option",{value:u.code,children:u.nativeName},u.code))})]}),x!=null&&x.supportUrl?o.jsxs(L,{variant:"secondary",onClick:()=>window.open(x.supportUrl,"_blank","noopener,noreferrer"),children:[o.jsx(Ze,{className:"mr-2 h-4 w-4"}),e("portal.header.support",{defaultValue:"Support"})]}):null,o.jsxs(L,{variant:"secondary",onClick:()=>void Rt(),children:[o.jsx(nt,{className:"mr-2 h-4 w-4"}),e("common.refresh",{defaultValue:"Refresh"})]})]})]}),o.jsxs("section",{className:"overflow-hidden rounded-3xl border border-line/70 shadow-soft",children:[o.jsx("div",{className:"p-6 text-white sm:p-8",style:Vt,children:o.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("p",{className:"text-sm/5 opacity-90",children:e("portal.hero.account",{defaultValue:"Account"})}),o.jsx("h2",{className:"mt-1 truncate text-xl font-semibold sm:text-2xl",children:d.email}),o.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[o.jsx("span",{className:`inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold ${d.status==="ACTIVE"?"border-emerald-200/40 bg-emerald-100/20 text-emerald-50":d.status==="EXPIRED"?"border-rose-200/35 bg-rose-100/20 text-rose-50":"border-amber-200/35 bg-amber-100/20 text-amber-50"}`,children:Et(d.status)}),d.trafficResetPeriod!=="NEVER"?o.jsxs("span",{className:"inline-flex items-center rounded-full border border-white/25 bg-white/10 px-3 py-1 text-xs font-medium text-white/90",children:[o.jsx(nt,{className:"mr-1 h-3 w-3"}),e("portal.hero.resets",{defaultValue:"Resets {{period}}",period:vt(d.trafficResetPeriod)})]}):null,je?o.jsxs("span",{className:`inline-flex items-center rounded-full border px-3 py-1 text-xs font-medium ${je.tone}`,children:[o.jsx(Ze,{className:"mr-1 h-3 w-3"}),je.label]}):null]})]}),o.jsxs("div",{className:"rounded-2xl border border-white/25 bg-white/10 px-4 py-3",children:[o.jsx("p",{className:"text-xs uppercase tracking-wider text-white/80",children:e("portal.hero.validUntil",{defaultValue:"Valid Until"})}),o.jsxs("p",{className:"mt-1 flex items-center gap-2 text-sm font-semibold",children:[o.jsx($t,{className:"h-4 w-4"}),new Date(d.expiry.date).toLocaleDateString()]}),o.jsx("p",{className:"mt-1 text-xs text-white/75",children:e("portal.hero.daysRemaining",{defaultValue:"{{days}} days remaining",days:d.expiry.daysRemaining})})]})]})}),o.jsxs("div",{className:"bg-white/10 px-6 py-5 text-white sm:px-8",children:[o.jsxs("div",{className:"mb-2 flex justify-between text-sm",children:[o.jsx("span",{className:"opacity-90",children:e("portal.hero.dataUsage",{defaultValue:"Data Usage"})}),o.jsxs("span",{className:"font-semibold",children:[de(d.usage.total)," / ",d.usage.limit>0?de(d.usage.limit):"∞"]})]}),o.jsx("div",{className:"h-3 w-full overflow-hidden rounded-full bg-white/20",children:o.jsx("div",{className:"h-full rounded-full bg-white/70 transition-all duration-500",style:{width:`${Math.min(d.usage.percent,100)}%`}})}),o.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 text-sm sm:grid-cols-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-white/90",children:[o.jsx(Wt,{className:"h-4 w-4"}),e("portal.hero.upload",{defaultValue:"Upload"}),": ",de(d.usage.upload)]}),o.jsxs("div",{className:"flex items-center gap-2 text-white/90 sm:justify-end",children:[o.jsx(Xt,{className:"h-4 w-4"}),e("portal.hero.download",{defaultValue:"Download"}),": ",de(d.usage.download)]})]})]})]}),o.jsxs($,{className:"space-y-5",children:[o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:e("portal.subscription.title",{defaultValue:"Subscription"})}),o.jsx("p",{className:"mt-1 text-sm text-muted",children:e("portal.subscription.description",{defaultValue:"Copy the URL, scan the QR code, or use one-click import."})})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:X.map(u=>o.jsx("button",{onClick:()=>c(u.key),className:`rounded-xl px-3 py-2 text-sm font-semibold transition ${a===u.key?"bg-brand-500 text-white shadow-soft":"border border-line/70 bg-card/70 text-muted hover:text-foreground"}`,children:u.label},u.key))})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[o.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl border border-line/70 bg-panel/55 p-5",children:[o.jsx("div",{className:"rounded-2xl border border-line/70 bg-white p-4",children:o.jsx(Se,{text:K||d.subscription.url,size:210,logoUrl:(x==null?void 0:x.logoUrl)||null,logoSizePercent:Ce})}),o.jsx("div",{className:"mt-4 text-center text-sm text-muted",children:At(a)}),o.jsxs(L,{variant:"ghost",className:"mt-3",onClick:()=>f(u=>!u),children:[o.jsx(et,{className:"mr-2 h-4 w-4"}),i?e("portal.subscription.hideLargeQr",{defaultValue:"Hide Large QR"}):e("portal.subscription.showLargeQr",{defaultValue:"Show Large QR"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"mb-2 block text-sm font-medium text-muted",children:e("portal.subscription.urlLabel",{defaultValue:"Subscription URL"})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{readOnly:!0,value:K,onClick:u=>{u.target.select(),Q(K,`sub-${a}`)},className:"flex-1 cursor-pointer select-all rounded-xl border border-line/80 bg-card/80 px-3 py-2 font-mono text-xs text-foreground sm:text-sm"}),o.jsx(L,{variant:"secondary",onClick:()=>void Q(K,`sub-${a}`),children:p===`sub-${a}`?o.jsx(ve,{className:"h-4 w-4 text-emerald-500"}):o.jsx(ae,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[o.jsxs(L,{variant:"secondary",className:"w-full",onClick:()=>window.open(d.subscription.clashUrl,"_blank","noopener,noreferrer"),children:[o.jsx(tt,{className:"mr-2 h-4 w-4"}),e("portal.subscription.downloadClashYaml",{defaultValue:"Download Clash YAML"})]}),ze?o.jsxs(L,{variant:"secondary",className:"w-full",onClick:()=>void Q(ze,"share"),children:[o.jsx(ie,{className:"mr-2 h-4 w-4"}),e("portal.subscription.copySharePage",{defaultValue:"Copy Share Page"})]}):null]}),o.jsxs("div",{className:"rounded-2xl border border-line/70 bg-panel/55 p-4 text-sm text-muted",children:[o.jsx("p",{className:"font-semibold text-foreground",children:e("portal.subscription.quickTipTitle",{defaultValue:"Quick tip"})}),o.jsx("p",{className:"mt-1",children:e("portal.subscription.quickTipBody",{defaultValue:"If a client can’t import via deep link, copy the subscription URL and use “Import from URL” inside the app."})})]})]})]}),i?o.jsx("div",{className:"flex justify-center rounded-2xl border border-line/70 bg-panel/55 p-6",children:o.jsx("div",{className:"rounded-3xl border border-line/70 bg-white p-5",children:o.jsx(Se,{text:K||d.subscription.url,size:320,logoUrl:(x==null?void 0:x.logoUrl)||null,logoSizePercent:Ce})})}):null]}),o.jsxs($,{className:"space-y-5",children:[o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:e("portal.addToApp.title",{defaultValue:"Add To App"})}),o.jsx("p",{className:"mt-1 text-sm text-muted",children:e("portal.addToApp.description",{defaultValue:"Choose your device and import with one tap."})})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:["android","ios","windows"].map(u=>o.jsx("button",{onClick:()=>l(u),className:`rounded-xl px-3 py-2 text-sm font-semibold transition ${r===u?"bg-brand-500 text-white shadow-soft":"border border-line/70 bg-card/70 text-muted hover:text-foreground"}`,children:Bt(u)},u))})]}),o.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Tt.map(u=>{const N=u.usesFormat||"v2ray",E=u.importUrl,I=u.storeLink,P=u.manualUrl||H[N]||K,Ut=Gt({appId:u.id,importUrl:E,manualUrl:P});return o.jsxs("div",{className:"rounded-2xl border border-line/70 bg-panel/55 p-5",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl border border-line/70 bg-card text-2xl",children:u.icon}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("p",{className:"text-base font-semibold text-foreground",children:u.name}),o.jsx("p",{className:"mt-1 text-sm text-muted",children:e(`portal.apps.${u.id}.description`,{defaultValue:u.description})})]})]}),o.jsx("span",{className:"rounded-full border border-line/70 bg-card/70 px-2.5 py-1 text-xs font-semibold text-muted",children:N.toUpperCase()})]}),o.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-2",children:[E?o.jsxs(L,{className:"w-full",onClick:()=>Kt(Ut),children:[o.jsx(Ht,{className:"mr-2 h-4 w-4"}),e("portal.addToApp.oneClickImport",{defaultValue:"One-Click Import"})]}):o.jsxs(L,{variant:"secondary",className:"w-full",onClick:()=>void Q(P,`manual-${u.id}`),children:[o.jsx(ae,{className:"mr-2 h-4 w-4"}),e("portal.addToApp.copyUrl",{defaultValue:"Copy URL"})]}),o.jsxs("div",{className:"flex gap-2",children:[I?o.jsx("a",{href:I,target:"_blank",rel:"noopener noreferrer",className:"flex-1",children:o.jsxs(L,{variant:"secondary",className:"w-full",children:[o.jsx(ie,{className:"mr-2 h-4 w-4"}),e("portal.addToApp.getApp",{defaultValue:"Get App"})]})}):o.jsxs(L,{variant:"secondary",className:"w-full flex-1",disabled:!0,children:[o.jsx(ie,{className:"mr-2 h-4 w-4"}),e("portal.addToApp.getApp",{defaultValue:"Get App"})]}),o.jsx(L,{variant:"ghost",className:"px-4",onClick:()=>void Q(H[N]||K,`app-${u.id}`),"aria-label":e("portal.addToApp.copyUrl",{defaultValue:"Copy URL"}),children:p===`app-${u.id}`?o.jsx(ve,{className:"h-4 w-4 text-emerald-500"}):o.jsx(ae,{className:"h-4 w-4"})})]})]})]},u.id)})})]}),o.jsxs($,{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:e("portal.nodes.title",{defaultValue:"Individual Nodes"})}),o.jsx("p",{className:"mt-1 text-sm text-muted",children:e("portal.nodes.description",{defaultValue:"Advanced: copy a single node link or scan its QR code."})})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:o.jsxs(L,{variant:"secondary",onClick:Pt,disabled:W.length===0,children:[o.jsx(tt,{className:"mr-2 h-4 w-4"}),e("portal.nodes.downloadAll",{defaultValue:"Download All"})]})})]}),W.length===0?o.jsx("div",{className:"rounded-2xl border border-line/70 bg-panel/55 p-5 text-sm text-muted",children:e("portal.nodes.none",{defaultValue:"No node links available for this subscription."})}):o.jsx("div",{className:"space-y-3",children:W.map(u=>{const N=h.has(u.inboundId),E=`node-${u.inboundId}`;return o.jsxs("div",{className:"rounded-2xl border border-line/70 bg-panel/55 p-4",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("span",{className:"rounded-lg bg-brand-500/15 px-2.5 py-1 text-xs font-semibold text-brand-400",children:u.protocol}),o.jsx("span",{className:"flex-1 truncate text-sm font-semibold text-foreground",children:u.remark}),o.jsxs("span",{className:"text-xs text-muted",children:[u.network," / ",u.security]})]}),o.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[o.jsxs(L,{size:"sm",variant:"secondary",onClick:()=>void Q(u.url,E),children:[p===E?o.jsx(ve,{className:"mr-1.5 h-4 w-4 text-emerald-500"}):o.jsx(ae,{className:"mr-1.5 h-4 w-4"}),p===E?e("common.copied",{defaultValue:"Copied"}):e("portal.nodes.copy",{defaultValue:"Copy"})]}),o.jsxs(L,{size:"sm",variant:"ghost",onClick:()=>kt(u.inboundId),children:[o.jsx(et,{className:"mr-1.5 h-4 w-4"}),N?e("portal.nodes.hideQr",{defaultValue:"Hide QR"}):e("portal.nodes.showQr",{defaultValue:"QR"})]}),o.jsxs(L,{size:"sm",variant:"ghost",onClick:()=>window.open(u.url,"_blank","noopener,noreferrer"),children:[o.jsx(ie,{className:"mr-1.5 h-4 w-4"}),e("common.open",{defaultValue:"Open"})]})]}),N?o.jsx("div",{className:"mt-4 flex justify-center",children:o.jsx("div",{className:"rounded-2xl border border-line/70 bg-white p-4",children:o.jsx(Se,{text:u.url,size:220,logoUrl:(x==null?void 0:x.logoUrl)||null,logoSizePercent:Ce})})}):null]},u.inboundId)})}),o.jsxs("details",{className:"rounded-2xl border border-line/70 bg-panel/55 p-4",children:[o.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-foreground",children:e("portal.nodes.instructions.title",{defaultValue:"Import instructions"})}),o.jsxs("div",{className:"mt-3 space-y-2 text-sm text-muted",children:[o.jsx("p",{className:"text-foreground/90 font-semibold",children:e("portal.nodes.instructions.generalTitle",{defaultValue:"General"})}),o.jsxs("ol",{className:"list-decimal space-y-1 pl-5",children:[o.jsx("li",{children:e("portal.nodes.instructions.generalStep1",{defaultValue:"Copy your subscription URL from the Subscription section above."})}),o.jsx("li",{children:e("portal.nodes.instructions.generalStep2",{defaultValue:"Open your client app and choose “Import from URL / Subscription”."})}),o.jsx("li",{children:e("portal.nodes.instructions.generalStep3",{defaultValue:"Paste the URL and refresh/update the profile."})})]}),o.jsx("p",{className:"mt-3 text-foreground/90 font-semibold",children:e("portal.nodes.instructions.failTitle",{defaultValue:"If import fails"})}),o.jsxs("ul",{className:"list-disc space-y-1 pl-5",children:[o.jsx("li",{children:e("portal.nodes.instructions.failTip1",{defaultValue:"Try a different format tab (Clash vs V2Ray vs Sing-box)."})}),o.jsx("li",{children:e("portal.nodes.instructions.failTip2",{defaultValue:"Switch network/Wi-Fi and try again."})}),o.jsx("li",{children:e("portal.nodes.instructions.failTip3",{defaultValue:"Use Individual Nodes to add a single server manually."})})]})]})]})]}),o.jsxs($,{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:e("portal.devices",{defaultValue:"Devices"})}),o.jsxs("p",{className:"mt-1 text-sm text-muted",children:[(R==null?void 0:R.online)??0," ",e("portal.online",{defaultValue:"online"})," / ",(R==null?void 0:R.total)??0," ",e("portal.seenInWindow",{defaultValue:"seen in last"})," ",(R==null?void 0:R.windowMinutes)??j,"m"]}),o.jsxs("p",{className:"mt-1 text-xs text-muted",children:[e("portal.limits",{defaultValue:"Limits"}),": IP ",((We=R==null?void 0:R.user)==null?void 0:We.ipLimit)??"-"," • ",e("portal.devicesLower",{defaultValue:"devices"})," ",((Xe=R==null?void 0:R.user)==null?void 0:Xe.deviceLimit)??"-"]})]}),o.jsxs(L,{variant:"ghost",onClick:()=>void F(),loading:M,children:[o.jsx(qt,{className:"mr-2 h-4 w-4"}),e("common.refresh",{defaultValue:"Refresh"})]})]}),be.length===0?o.jsx("div",{className:"rounded-2xl border border-line/70 bg-panel/55 p-5 text-sm text-muted",children:e("portal.noDevices",{defaultValue:"No devices tracked yet."})}):o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"min-w-full text-sm",children:[o.jsx("thead",{className:"text-left text-xs uppercase tracking-wide text-muted",children:o.jsxs("tr",{className:"border-b border-line/70",children:[o.jsx("th",{className:"py-2 pr-3",children:e("portal.status",{defaultValue:"Status"})}),o.jsx("th",{className:"py-2 pr-3",children:e("portal.fingerprint",{defaultValue:"Fingerprint"})}),o.jsx("th",{className:"py-2 pr-3",children:e("portal.ip",{defaultValue:"IP"})}),o.jsx("th",{className:"py-2 pr-3",children:e("portal.inbound",{defaultValue:"Inbound"})}),o.jsx("th",{className:"py-2 pr-3",children:e("portal.lastSeen",{defaultValue:"Last seen"})}),o.jsx("th",{className:"py-2 text-right",children:e("portal.action",{defaultValue:"Action"})})]})}),o.jsx("tbody",{children:be.slice(0,12).map(u=>o.jsxs("tr",{className:"border-b border-line/50",children:[o.jsx("td",{className:"py-2 pr-3",children:o.jsxs("span",{className:`inline-flex items-center gap-1.5 rounded-full px-2 py-0.5 text-xs ${u.online?"bg-emerald-500/15 text-emerald-300":"bg-zinc-500/15 text-zinc-300"}`,children:[o.jsxs("span",{className:"relative inline-flex h-2.5 w-2.5",children:[u.online?o.jsx("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-emerald-400 opacity-70"}):null,o.jsx("span",{className:`relative inline-flex h-2.5 w-2.5 rounded-full ${u.online?"bg-emerald-400":"bg-zinc-400"}`})]}),u.online?e("portal.online",{defaultValue:"Online"}):e("portal.offline",{defaultValue:"Offline"})]})}),o.jsx("td",{className:"py-2 pr-3 font-mono text-xs text-muted",children:u.shortFingerprint}),o.jsx("td",{className:"py-2 pr-3 text-muted",children:u.clientIp||"-"}),o.jsx("td",{className:"py-2 pr-3 text-xs text-muted",children:u.inbound?`${u.inbound.protocol} • ${u.inbound.port}`:"-"}),o.jsx("td",{className:"py-2 pr-3 text-muted",children:new Date(u.lastSeenAt).toLocaleString()}),o.jsx("td",{className:"py-2 text-right",children:o.jsx(L,{size:"sm",variant:"ghost",loading:_.isPending&&C===u.fingerprint,onClick:()=>{window.confirm(e("portal.confirmRevokeDevice",{defaultValue:"Revoke this device? It will need to reconnect."}))&&(T(u.fingerprint),_.mutate(u.fingerprint,{onSettled:()=>T(null)}))},children:e("portal.revoke",{defaultValue:"Revoke"})})})]},u.fingerprint))})]}),be.length>12?o.jsxs("p",{className:"mt-3 text-xs text-muted",children:[e("portal.showingFirst",{defaultValue:"Showing first"})," 12 ",e("portal.devicesLower",{defaultValue:"devices"}),"."]}):null]})]}),o.jsx("div",{className:"py-4 text-center text-xs text-muted",children:x!=null&&x.customFooter?x.customFooter:e("portal.footer.poweredBy",{defaultValue:"Powered by {{appName}}",appName:(x==null?void 0:x.appName)||"One-UI"})})]})]})};export{or as UserInfoPage};
