import{r as u,b as m,j as e}from"./index-Mm4FQecB.js";import{u as x}from"./useMutation-BqgM2-rT.js";import{u as y,C as f}from"./useToast-CQz3nkev.js";import{B as g}from"./Button-OXbbz5eU.js";import{I as p}from"./Input-BtZIH1S2.js";import{C as b,c as k}from"./clipboard-CARLoSHl.js";import{u as j,R as N}from"./useTranslation-DKz5Ms18.js";import"./cn-BLSKlp9E.js";const F=()=>{const d=y(),{t}=j(),[i,h]=u.useState([]),[s,o]=u.useState({domain:"",type:"A",content:"",proxied:!0}),n=x({mutationFn:async()=>{const{data:a}=await m.post("/settings/cdn-scan",{});return a.data},onSuccess:a=>{h(a)},onError:a=>{var r,l;d.error(t("common.error",{defaultValue:"Error"}),((l=(r=a.response)==null?void 0:r.data)==null?void 0:l.message)||a.message||t("toolsSettings.toast.scanFailed",{defaultValue:"Scan failed"}))}}),c=x({mutationFn:async a=>{const{data:r}=await m.post("/settings/cloudflare/dns",a);return r},onSuccess:()=>{d.success(t("common.success",{defaultValue:"Success"}),t("toolsSettings.toast.dnsUpdated",{defaultValue:"DNS record updated successfully."})),o({...s,domain:"",content:""})},onError:a=>{var r,l;d.error(t("common.error",{defaultValue:"Error"}),((l=(r=a.response)==null?void 0:r.data)==null?void 0:l.message)||a.message||t("toolsSettings.toast.dnsUpdateFailed",{defaultValue:"DNS update failed"}))}});return e.jsx(f,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:t("toolsSettings.title",{defaultValue:"Tools & utilities"})})}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 dark:border-gray-700",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900 dark:text-white",children:t("toolsSettings.dns.title",{defaultValue:"Cloudflare DNS record manager"})}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:t("toolsSettings.dns.subtitle",{defaultValue:"Quickly add or update DNS records in your Cloudflare account."})}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(p,{label:t("toolsSettings.dns.domainLabel",{defaultValue:"Domain"}),value:s.domain,onChange:a=>o({...s,domain:a.target.value}),placeholder:t("toolsSettings.dns.domainPlaceholder",{defaultValue:"sub.example.com"})}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:t("toolsSettings.dns.typeLabel",{defaultValue:"Type"})}),e.jsxs("select",{className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-gray-600 dark:bg-gray-800 dark:text-white",value:s.type,onChange:a=>o({...s,type:a.target.value}),children:[e.jsx("option",{value:"A",children:"A"}),e.jsx("option",{value:"AAAA",children:"AAAA"}),e.jsx("option",{value:"CNAME",children:"CNAME"})]})]}),e.jsx(p,{label:t("toolsSettings.dns.contentLabel",{defaultValue:"Content"}),value:s.content,onChange:a=>o({...s,content:a.target.value}),placeholder:t("toolsSettings.dns.contentPlaceholder",{defaultValue:"1.2.3.4"})}),e.jsxs("div",{className:"flex items-center pt-8",children:[e.jsx("input",{type:"checkbox",id:"proxied",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:focus:ring-blue-400",checked:s.proxied,onChange:a=>o({...s,proxied:a.target.checked})}),e.jsx("label",{htmlFor:"proxied",className:"ml-2 block text-sm text-gray-900 dark:text-gray-200",children:t("toolsSettings.dns.proxiedLabel",{defaultValue:"Proxied"})})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(g,{onClick:()=>c.mutate(s),loading:c.isPending,disabled:!s.domain||!s.content,children:t("toolsSettings.dns.updateButton",{defaultValue:"Update record"})})})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:t("toolsSettings.cdnScan.title",{defaultValue:"Cloudflare CDN IP scanner"})}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:t("toolsSettings.cdnScan.subtitle",{defaultValue:"Scan for the best performing Cloudflare IPs for your location. This helps optimize speed and latency."})}),e.jsx("div",{className:"mt-4",children:e.jsx(g,{onClick:()=>n.mutate(),loading:n.isPending,icon:e.jsx(N,{className:`h-4 w-4 ${n.isPending?"animate-spin":""}`}),children:t("toolsSettings.cdnScan.startButton",{defaultValue:"Start scan"})})}),i.length>0&&e.jsx("div",{className:"mt-6 overflow-hidden rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300",children:t("toolsSettings.cdnScan.table.ip",{defaultValue:"IP address"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300",children:t("toolsSettings.cdnScan.table.latency",{defaultValue:"Latency"})}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-300",children:t("common.action",{defaultValue:"Action"})})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-900",children:i.slice(0,10).map((a,r)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-gray-900 dark:text-white",children:a.ip}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-400",children:e.jsxs("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${a.latency<100?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":a.latency<200?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:[a.latency," ms"]})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-right text-sm",children:e.jsx("button",{onClick:()=>{k(a.ip).then(l=>{if(l){d.success(t("common.success",{defaultValue:"Success"}),t("toolsSettings.toast.ipCopied",{defaultValue:"IP copied to clipboard."}));return}d.error(t("common.error",{defaultValue:"Error"}),t("toolsSettings.toast.copyFailed",{defaultValue:"Unable to copy IP."}))})},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(b,{className:"h-4 w-4"})})})]},r))})]})})]})]})})};export{F as default};
