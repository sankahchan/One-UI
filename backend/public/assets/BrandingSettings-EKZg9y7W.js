import{c as nt,e as it,r,b as S,j as t,X as ot}from"./index-DrL1zW_A.js";import{u as dt}from"./useQuery-KR27nzFv.js";import{u as ae}from"./useMutation-DkKyHOPA.js";import{u as ct,C as Ye}from"./useToast-BeE1NVOC.js";import{B as W}from"./Button-DfueQd-M.js";import{I as i}from"./Input-DRY4L2lB.js";import{B as Qe}from"./subscriptionApps-BkFFy6rX.js";import{u as ut}from"./useTranslation-BKUwUwH0.js";import{S as pt}from"./sparkles-B1NIZeIe.js";import{P as mt}from"./Settings-CVFejToT.js";import{U as xt}from"./upload-BQetUoHm.js";import{P as gt}from"./pen-square-2SNhslOv.js";import{T as bt}from"./trash-2-DdRxyV_4.js";import"./cn-BLSKlp9E.js";import"./Skeleton-BI5exCjh.js";import"./lock-DRpirkSs.js";import"./server-BAAycAvu.js";import"./activity-DgL4kvl2.js";/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=nt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),ht=[{id:"aurora",name:"Aurora",primary:"#3b82f6",accent:"#6366f1"},{id:"emerald",name:"Emerald",primary:"#10b981",accent:"#14b8a6"},{id:"sunset",name:"Sunset",primary:"#f97316",accent:"#ef4444"},{id:"rose",name:"Rose",primary:"#ec4899",accent:"#a855f7"}],vt=5*1024*1024,jt=["image/jpeg","image/png","image/webp","image/gif"];function L(o,l){const s=String(o||"").trim();return/^#[0-9a-fA-F]{6}$/.test(s)?s:/^[0-9a-fA-F]{6}$/.test(s)?`#${s}`:l}function _e(o){const l=String(o||"").trim();return l?/^#[0-9a-fA-F]{6}$/.test(l)?l:/^[0-9a-fA-F]{6}$/.test(l)?`#${l}`:null:null}function re(o,l){const s=L(o,"#3b82f6").replace("#",""),h=Number.parseInt(s,16),R=h>>16&255,P=h>>8&255,C=h&255;return`rgba(${R}, ${P}, ${C}, ${Math.min(Math.max(l,0),1)})`}function Nt(o){return o.split(",").map(l=>Number(l.trim())).filter(l=>Number.isFinite(l))}function yt(o){try{return JSON.stringify(o??[],null,2)}catch{return"[]"}}const Vt=()=>{const o=it(),l=ct(),{t:s}=ut(),[h,R]=r.useState(null),[P,C]=r.useState(""),[c,se]=r.useState("GLOBAL"),[p,le]=r.useState("One-UI"),[Ie,ne]=r.useState(""),[U,ie]=r.useState(""),[I,oe]=r.useState(""),[j,de]=r.useState(""),[Fe,ce]=r.useState(""),[N,ue]=r.useState(""),[T,y]=r.useState(""),[B,w]=r.useState(""),[F,pe]=r.useState(""),[O,me]=r.useState(""),[xe,ge]=r.useState(100),[A,be]=r.useState([]),[Oe,fe]=r.useState(""),[Ae,he]=r.useState("80,90,95"),[V,$]=r.useState(""),[z,ve]=r.useState("62"),[Ee,je]=r.useState("0"),[D,X]=r.useState("50"),[q,J]=r.useState("50"),[E,Y]=r.useState(""),[M,Q]=r.useState(""),[_,H]=r.useState("62"),[u,m]=r.useState(null),[G,x]=r.useState(""),[Me,g]=r.useState(""),[He,Ne]=r.useState(!1),[ye,we]=r.useState("[]"),Ge=r.useRef(null),Se=dt({queryKey:["subscription-branding"],queryFn:async()=>{var a;return((a=(await S.get("/settings/subscription-branding")).data)==null?void 0:a.brandings)||[]}}),k=Number.isInteger(h)&&h>0,Ke=r.useMemo(()=>{const e={android:[],ios:[],windows:[]};for(const a of Qe)for(const n of a.platforms)e[n].push(a);return e},[]),K=r.useMemo(()=>L(T,"#3b82f6"),[T]),Z=r.useMemo(()=>L(B,"#6366f1"),[B]),Ze=r.useMemo(()=>{const e=V.trim();return/^https?:\/\//i.test(e)?e:""},[V]),ke=G||Ze,et=r.useMemo(()=>{const e=Number(z);return Number.isFinite(e)?Math.min(Math.max(e,10),90):62},[z]),We=r.useMemo(()=>{const e=Number(D);return Number.isFinite(e)?Math.min(Math.max(e,0),100):50},[D]),Le=r.useMemo(()=>{const e=Number(q);return Number.isFinite(e)?Math.min(Math.max(e,0),100):50},[q]),Re=r.useMemo(()=>L(E,K),[K,E]),Te=r.useMemo(()=>L(M,Z),[Z,M]),Be=r.useMemo(()=>{const e=Number(_);return Number.isFinite(e)?Math.min(Math.max(e,0),100):62},[_]),d=!!ke,tt=A.length>0?A.length:Qe.length;r.useEffect(()=>{if(G.startsWith("blob:"))return()=>{URL.revokeObjectURL(G)}},[G]);const Ve=e=>{const n=(Ge.current||e.currentTarget).getBoundingClientRect();if(n.width<=0||n.height<=0)return;const b=Math.min(Math.max(e.clientX-n.left,0),n.width),v=Math.min(Math.max(e.clientY-n.top,0),n.height),ee=Math.round(b/n.width*100),te=Math.round(v/n.height*100);X(String(ee)),J(String(te))},$e=()=>{R(null),C(""),se("GLOBAL"),le("One-UI"),ne(""),ie(""),oe(""),de(""),ce(""),ue(""),y(""),w(""),pe(""),me(""),ge(100),be([]),fe(""),he("80,90,95"),$(""),ve("62"),je("0"),X("50"),J("50"),Y(""),Q(""),H("62"),m(null),x(""),g(""),we("[]")},at=e=>{R(e.id),C(e.name||""),se(e.scope),le(e.appName||"One-UI"),ne(e.logoUrl||""),ie(e.profileTitle||""),oe(e.profileDescription||""),de(e.customFooter||""),ce(e.clashProfileName||""),ue(e.supportUrl||""),y(e.primaryColor||""),w(e.accentColor||""),pe(e.userId?String(e.userId):""),me(e.groupId?String(e.groupId):""),ge(Number.isInteger(e.priority)?e.priority:100);const a=e.metadata&&typeof e.metadata=="object"?e.metadata:{};be(Array.isArray(a.enabledApps)?a.enabledApps.map(String):[]),fe(a.qrLogoSizePercent!==void 0?String(a.qrLogoSizePercent):""),he(Array.isArray(a.usageAlertThresholds)?a.usageAlertThresholds.map(n=>String(n)).join(","):"80,90,95"),$(typeof a.wallpaperUrl=="string"?a.wallpaperUrl:""),ve(a.wallpaperOverlayOpacity!==void 0?String(a.wallpaperOverlayOpacity):"62"),je(a.wallpaperBlurPx!==void 0?String(a.wallpaperBlurPx):"0"),X(a.wallpaperPositionX!==void 0?String(a.wallpaperPositionX):"50"),J(a.wallpaperPositionY!==void 0?String(a.wallpaperPositionY):"50"),Y(typeof a.wallpaperGradientFrom=="string"?a.wallpaperGradientFrom:""),Q(typeof a.wallpaperGradientTo=="string"?a.wallpaperGradientTo:""),H(a.wallpaperGradientOpacity!==void 0?String(a.wallpaperGradientOpacity):"62"),m(null),x(""),g(""),we(yt(a.customApps||[]))},Pe=ae({mutationFn:async e=>{const a=new FormData;return a.append("wallpaper",e),(await S.post("/settings/subscription-branding/upload-wallpaper",a,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:e=>{if(!(e!=null&&e.wallpaperUrl)){l.error(s("common.error",{defaultValue:"Error"}),s("brandingSettings.toast.uploadFailed",{defaultValue:"Wallpaper upload failed."}));return}$(e.wallpaperUrl),m(null),x(""),g(""),l.success(s("common.success",{defaultValue:"Success"}),s("brandingSettings.toast.uploaded",{defaultValue:"Wallpaper uploaded successfully."}))},onError:e=>{l.error(s("common.error",{defaultValue:"Error"}),(e==null?void 0:e.message)||s("brandingSettings.toast.uploadFailed",{defaultValue:"Wallpaper upload failed."}))}}),rt=e=>{var n;const a=((n=e.target.files)==null?void 0:n[0])||null;if(e.target.value="",!a){m(null),x(""),g("");return}if(!jt.includes(a.type)){m(null),x(""),g(s("brandingSettings.toast.invalidWallpaperType",{defaultValue:"Invalid file type. Allowed: JPG, PNG, WEBP, GIF."}));return}if(a.size>vt){m(null),x(""),g(s("brandingSettings.toast.invalidWallpaperSize",{defaultValue:"Wallpaper must be 5 MB or smaller."}));return}m(a),g(""),x(URL.createObjectURL(a))},ze=ae({mutationFn:async()=>{if(u)throw new Error(s("brandingSettings.toast.uploadWallpaperFirst",{defaultValue:"Please upload the selected wallpaper image before saving."}));const e={name:P,scope:c,appName:p,logoUrl:Ie,profileTitle:U,profileDescription:I,customFooter:j,clashProfileName:Fe,supportUrl:N,primaryColor:T,accentColor:B,priority:xe};c==="USER"&&F.trim()&&(e.userId=Number.parseInt(F,10)),c==="GROUP"&&O.trim()&&(e.groupId=Number.parseInt(O,10));const a={};A.length>0&&(a.enabledApps=A);const n=Number(Oe);Number.isFinite(n)&&(a.qrLogoSizePercent=Math.min(Math.max(n,10),40));const b=Nt(Ae).map(f=>Math.min(Math.max(f,1),100));b.length>0&&(a.usageAlertThresholds=b);const v=V.trim();if(v){if(!/^https?:\/\//i.test(v))throw l.error(s("common.error",{defaultValue:"Error"}),s("brandingSettings.toast.invalidWallpaperUrl",{defaultValue:"Wallpaper URL must start with http:// or https://"})),new Error("Invalid wallpaper URL");a.wallpaperUrl=v}const ee=Number(z);Number.isFinite(ee)&&(a.wallpaperOverlayOpacity=Math.min(Math.max(ee,10),90));const te=Number(Ee);Number.isFinite(te)&&(a.wallpaperBlurPx=Math.min(Math.max(te,0),24));const De=Number(D);Number.isFinite(De)&&(a.wallpaperPositionX=Math.min(Math.max(De,0),100));const Xe=Number(q);Number.isFinite(Xe)&&(a.wallpaperPositionY=Math.min(Math.max(Xe,0),100));const Ce=_e(E);if(E.trim()&&!Ce)throw l.error(s("common.error",{defaultValue:"Error"}),s("brandingSettings.toast.invalidGradientColor",{defaultValue:"Gradient colors must be valid HEX values (example: #22d3ee)."})),new Error("Invalid gradient start color");Ce&&(a.wallpaperGradientFrom=Ce);const Ue=_e(M);if(M.trim()&&!Ue)throw l.error(s("common.error",{defaultValue:"Error"}),s("brandingSettings.toast.invalidGradientColor",{defaultValue:"Gradient colors must be valid HEX values (example: #22d3ee)."})),new Error("Invalid gradient end color");Ue&&(a.wallpaperGradientTo=Ue);const qe=Number(_);Number.isFinite(qe)&&(a.wallpaperGradientOpacity=Math.min(Math.max(qe,0),100));try{const f=ye.trim()?ye:"[]",Je=JSON.parse(f);if(!Array.isArray(Je))throw new Error("Custom apps JSON must be an array.");a.customApps=Je}catch(f){throw l.error(s("common.error",{defaultValue:"Error"}),(f==null?void 0:f.message)||s("brandingSettings.toast.invalidJson",{defaultValue:"Custom apps JSON is invalid."})),f}(k||Object.keys(a).length>0)&&(e.metadata=a),k?await S.put(`/settings/subscription-branding/${h}`,e):await S.post("/settings/subscription-branding",e)},onSuccess:async()=>{$e(),await o.invalidateQueries({queryKey:["subscription-branding"]}),l.success(s("common.success",{defaultValue:"Success"}),k?s("brandingSettings.toast.updated",{defaultValue:"Subscription branding updated successfully."}):s("brandingSettings.toast.created",{defaultValue:"Subscription branding profile created successfully."}))},onError:e=>{l.error(s("common.error",{defaultValue:"Error"}),(e==null?void 0:e.message)||s("brandingSettings.toast.saveFailed",{defaultValue:"Failed to save branding"}))}}),st=ae({mutationFn:async e=>{await S.put(`/settings/subscription-branding/${e.id}`,{enabled:!e.enabled})},onSuccess:async()=>{await o.invalidateQueries({queryKey:["subscription-branding"]}),l.success(s("common.success",{defaultValue:"Success"}),s("brandingSettings.toast.statusUpdated",{defaultValue:"Branding status updated."}))},onError:e=>{l.error(s("common.error",{defaultValue:"Error"}),(e==null?void 0:e.message)||s("brandingSettings.toast.statusUpdateFailed",{defaultValue:"Failed to update branding status"}))}}),lt=ae({mutationFn:async e=>{await S.delete(`/settings/subscription-branding/${e}`)},onSuccess:async()=>{await o.invalidateQueries({queryKey:["subscription-branding"]}),l.success(s("common.success",{defaultValue:"Success"}),s("brandingSettings.toast.deleted",{defaultValue:"Branding profile deleted."}))},onError:e=>{l.error(s("common.error",{defaultValue:"Error"}),(e==null?void 0:e.message)||s("brandingSettings.toast.deleteFailed",{defaultValue:"Failed to delete branding"}))}});return t.jsxs("div",{className:"space-y-6",children:[t.jsxs(Ye,{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Subscription Branding"}),t.jsx("p",{className:"mt-1 text-sm text-muted",children:"Customize subscription profile identity by scope (GLOBAL, GROUP, USER)."})]}),k?t.jsxs(W,{variant:"secondary",onClick:$e,children:[t.jsx(ot,{className:"mr-2 h-4 w-4"}),"Cancel edit"]}):null]}),t.jsxs("div",{className:"rounded-2xl border border-line/70 bg-panel/55 p-4 sm:p-5",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[t.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-line/70 p-5 lg:col-span-2",style:{backgroundImage:d?`url(${ke})`:`linear-gradient(135deg, ${re(Re,.25)} 0%, ${re(Te,.35)} 100%)`,backgroundSize:"cover",backgroundPosition:`${We}% ${Le}%`},children:[d?t.jsx("div",{ref:Ge,className:"absolute inset-0 z-20 cursor-crosshair touch-none","aria-label":"Wallpaper focal position selector",onPointerDown:e=>{Ne(!0),Ve(e),e.currentTarget.setPointerCapture(e.pointerId)},onPointerMove:e=>{He&&Ve(e)},onPointerUp:e=>{Ne(!1),e.currentTarget.hasPointerCapture(e.pointerId)&&e.currentTarget.releasePointerCapture(e.pointerId)},onPointerCancel:e=>{Ne(!1),e.currentTarget.hasPointerCapture(e.pointerId)&&e.currentTarget.releasePointerCapture(e.pointerId)}}):null,d?t.jsx("div",{className:"pointer-events-none absolute z-20",style:{left:`${We}%`,top:`${Le}%`,transform:"translate(-50%, -50%)"},children:t.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-white/80 bg-black/35 text-[10px] font-semibold text-white shadow-lg",children:"âœš"})}):null,d?t.jsx("div",{className:"pointer-events-none absolute inset-0",style:{backgroundImage:`linear-gradient(135deg, ${re(Re,Be/100)} 0%, ${re(Te,Be/100)} 100%)`}}):null,d?t.jsx("div",{className:"pointer-events-none absolute inset-0",style:{backgroundColor:`rgba(2, 6, 23, ${et/100})`}}):null,t.jsxs("div",{className:"relative z-10 mb-2 inline-flex items-center rounded-full border border-line/70 bg-card/70 px-2.5 py-1 text-xs font-medium text-muted",children:["Preview ",d?"- Wallpaper":""]}),t.jsx("h4",{className:`relative z-10 text-xl font-semibold ${d?"text-white":"text-foreground"}`,children:(U==null?void 0:U.trim())||`${(p==null?void 0:p.trim())||"One-UI"} Subscription`}),t.jsx("p",{className:`relative z-10 mt-2 max-w-2xl text-sm ${d?"text-slate-100/90":"text-muted"}`,children:(I==null?void 0:I.trim())||"Managed by One-UI"}),t.jsxs("div",{className:"relative z-10 mt-4 flex flex-wrap gap-2 text-xs",children:[t.jsx("span",{className:`rounded-full border border-line/70 bg-card/70 px-2.5 py-1 ${d?"text-white":"text-foreground"}`,children:(p==null?void 0:p.trim())||"One-UI"}),N!=null&&N.trim()?t.jsxs("span",{className:`rounded-full border border-line/70 bg-card/70 px-2.5 py-1 ${d?"text-slate-100/80":"text-muted"}`,children:["Support: ",N.trim()]}):null,j!=null&&j.trim()?t.jsx("span",{className:`rounded-full border border-line/70 bg-card/70 px-2.5 py-1 ${d?"text-slate-100/80":"text-muted"}`,children:j.trim()}):null]})]}),t.jsxs("div",{className:"rounded-2xl border border-line/70 bg-card/65 p-4",children:[t.jsxs("div",{className:"mb-3 inline-flex items-center gap-2 text-sm font-semibold text-foreground",children:[t.jsx(pt,{className:"h-4 w-4 text-brand-500"}),"Active Configuration"]}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-line/70 bg-panel/55 px-3 py-2",children:[t.jsx("span",{className:"text-muted",children:"Scope"}),t.jsx("span",{className:"font-semibold text-foreground",children:c})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-line/70 bg-panel/55 px-3 py-2",children:[t.jsx("span",{className:"text-muted",children:"Priority"}),t.jsx("span",{className:"font-semibold text-foreground",children:xe})]}),t.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-line/70 bg-panel/55 px-3 py-2",children:[t.jsx("span",{className:"text-muted",children:"Visible apps"}),t.jsx("span",{className:"font-semibold text-foreground",children:tt})]}),c==="USER"&&F?t.jsxs("div",{className:"rounded-lg border border-line/70 bg-panel/55 px-3 py-2 text-muted",children:["User target: ",t.jsxs("span",{className:"font-semibold text-foreground",children:["#",F]})]}):null,c==="GROUP"&&O?t.jsxs("div",{className:"rounded-lg border border-line/70 bg-panel/55 px-3 py-2 text-muted",children:["Group target: ",t.jsxs("span",{className:"font-semibold text-foreground",children:["#",O]})]}):null]})]})]}),t.jsxs("div",{className:"mt-4 rounded-2xl border border-line/70 bg-card/65 p-4",children:[t.jsxs("div",{className:"mb-3 inline-flex items-center gap-2 text-sm font-semibold text-foreground",children:[t.jsx(mt,{className:"h-4 w-4 text-brand-500"}),"Quick Color Presets"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:ht.map(e=>t.jsxs("button",{type:"button",onClick:()=>{y(e.primary),w(e.accent)},className:"inline-flex items-center gap-2 rounded-full border border-line/70 bg-panel/55 px-3 py-1.5 text-xs font-medium text-foreground transition hover:border-brand-500/45 hover:bg-card",children:[t.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[t.jsx("span",{className:"h-3 w-3 rounded-full border border-white/25",style:{backgroundColor:e.primary}}),t.jsx("span",{className:"h-3 w-3 rounded-full border border-white/25",style:{backgroundColor:e.accent}})]}),e.name]},e.id))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-12",children:[t.jsxs("div",{className:"rounded-2xl border border-line/70 bg-panel/55 p-4 xl:col-span-8",children:[t.jsx("h4",{className:"mb-3 text-sm font-semibold text-foreground",children:"Identity & Copy"}),t.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[t.jsx(i,{label:"Name",value:P,onChange:e=>C(e.target.value),placeholder:"Default branding"}),t.jsxs("div",{children:[t.jsx("label",{className:"mb-2 block text-sm font-medium text-muted",children:"Scope"}),t.jsxs("select",{value:c,onChange:e=>se(e.target.value),className:"w-full rounded-xl border border-line/80 bg-card/75 px-4 py-2.5 text-sm text-foreground outline-none transition-all duration-200 focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-app",children:[t.jsx("option",{value:"GLOBAL",children:"GLOBAL"}),t.jsx("option",{value:"GROUP",children:"GROUP"}),t.jsx("option",{value:"USER",children:"USER"})]})]}),t.jsx(i,{label:"App Name",value:p,onChange:e=>le(e.target.value),placeholder:"One-UI"}),t.jsx(i,{label:"Clash Profile Name",value:Fe,onChange:e=>ce(e.target.value),placeholder:"One-UI"}),t.jsx(i,{label:"Profile Title",value:U,onChange:e=>ie(e.target.value),placeholder:"One-UI Subscription"}),t.jsx(i,{label:"Profile Description",value:I,onChange:e=>oe(e.target.value),placeholder:"Managed by One-UI"}),t.jsx(i,{label:"Custom Footer",value:j,onChange:e=>de(e.target.value),placeholder:"Powered by One-UI"}),t.jsx(i,{label:"Priority",type:"number",value:String(xe),onChange:e=>ge(Number.parseInt(e.target.value||"100",10))}),c==="USER"?t.jsx(i,{label:"User ID",value:F,onChange:e=>pe(e.target.value),placeholder:"1"}):null,c==="GROUP"?t.jsx(i,{label:"Group ID",value:O,onChange:e=>me(e.target.value),placeholder:"1"}):null]})]}),t.jsxs("div",{className:"rounded-2xl border border-line/70 bg-panel/55 p-4 xl:col-span-4",children:[t.jsx("h4",{className:"mb-3 text-sm font-semibold text-foreground",children:"Visual Theme"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(i,{label:"Logo URL",value:Ie,onChange:e=>ne(e.target.value),placeholder:"https://..."}),t.jsx(i,{label:"Support URL",value:N,onChange:e=>ue(e.target.value),placeholder:"https://your.domain/support"}),t.jsxs("div",{className:"rounded-xl border border-line/70 bg-card/55 p-3",children:[t.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm font-medium text-foreground",children:[t.jsx(ft,{className:"h-4 w-4 text-brand-500"}),"Upload Wallpaper"]}),t.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/webp,image/gif",onChange:rt,className:"w-full rounded-lg border border-line/70 bg-panel/60 px-3 py-2 text-xs text-foreground file:mr-3 file:rounded-md file:border-0 file:bg-brand-500/20 file:px-3 file:py-1.5 file:text-xs file:font-semibold file:text-brand-100 hover:file:bg-brand-500/30"}),t.jsx("p",{className:"mt-2 text-xs text-muted",children:"JPG, PNG, WEBP, GIF up to 5 MB."}),Me?t.jsx("p",{className:"mt-2 text-xs text-rose-400",children:Me}):null,u?t.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-muted",children:[t.jsx("span",{className:"rounded-full border border-line/70 bg-panel/55 px-2 py-1",children:u.name}),t.jsxs("span",{children:[(u.size/1024/1024).toFixed(2)," MB"]})]}):null,t.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[t.jsxs(W,{type:"button",size:"sm",onClick:()=>{u&&Pe.mutate(u)},loading:Pe.isPending,disabled:!u,children:[t.jsx(xt,{className:"mr-2 h-4 w-4"}),"Upload image"]}),t.jsx(W,{type:"button",size:"sm",variant:"secondary",onClick:()=>{m(null),x(""),g("")},disabled:!u&&!G,children:"Clear selection"})]})]}),t.jsx(i,{label:"Wallpaper URL",value:V,onChange:e=>$(e.target.value),placeholder:"https://images.unsplash.com/..."}),t.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[t.jsx(i,{label:"Wallpaper Overlay (%)",type:"number",value:z,onChange:e=>ve(e.target.value),placeholder:"62"}),t.jsx(i,{label:"Wallpaper Blur (px)",type:"number",value:Ee,onChange:e=>je(e.target.value),placeholder:"0"})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[t.jsx(i,{label:"Focal Position X (%)",type:"number",value:D,onChange:e=>X(e.target.value),placeholder:"50"}),t.jsx(i,{label:"Focal Position Y (%)",type:"number",value:q,onChange:e=>J(e.target.value),placeholder:"50"})]}),t.jsx("p",{className:"text-xs text-muted",children:"Tip: Drag directly on the preview image to set focal position quickly."}),t.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[t.jsx(i,{label:"Gradient From",value:E,onChange:e=>Y(e.target.value),placeholder:"#3b82f6"}),t.jsx(i,{label:"Gradient To",value:M,onChange:e=>Q(e.target.value),placeholder:"#6366f1"})]}),t.jsx(i,{label:"Gradient Opacity (%)",type:"number",value:_,onChange:e=>H(e.target.value),placeholder:"62"}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsx("label",{className:"ml-1 block text-sm font-medium text-muted",children:"Primary Color"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"h-10 w-10 shrink-0 rounded-lg border border-line/70",style:{backgroundColor:K}}),t.jsx("input",{value:T,onChange:e=>y(e.target.value),placeholder:"#3b82f6",className:"w-full rounded-xl border border-line/80 bg-card/75 px-4 py-2.5 text-sm text-foreground outline-none transition-all duration-200 placeholder:text-muted focus-visible:border-brand-500/50 focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-app"}),t.jsx("input",{type:"color",value:K,onChange:e=>y(e.target.value),className:"h-10 w-10 cursor-pointer rounded-lg border border-line/70 bg-card p-1","aria-label":"Pick primary color"})]})]}),t.jsxs("div",{className:"space-y-1.5",children:[t.jsx("label",{className:"ml-1 block text-sm font-medium text-muted",children:"Accent Color"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"h-10 w-10 shrink-0 rounded-lg border border-line/70",style:{backgroundColor:Z}}),t.jsx("input",{value:B,onChange:e=>w(e.target.value),placeholder:"#6366f1",className:"w-full rounded-xl border border-line/80 bg-card/75 px-4 py-2.5 text-sm text-foreground outline-none transition-all duration-200 placeholder:text-muted focus-visible:border-brand-500/50 focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-app"}),t.jsx("input",{type:"color",value:Z,onChange:e=>w(e.target.value),className:"h-10 w-10 cursor-pointer rounded-lg border border-line/70 bg-card p-1","aria-label":"Pick accent color"})]})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-3",children:[t.jsxs("div",{className:"rounded-2xl border border-line/70 bg-panel/55 p-4 xl:col-span-2",children:[t.jsx("h4",{className:"text-sm font-semibold text-foreground",children:"Enabled Apps"}),t.jsx("p",{className:"mt-1 text-xs text-muted",children:"Choose which one-click import tiles appear on the subscription page."}),t.jsx("div",{className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2",children:["android","ios","windows"].map(e=>t.jsxs("div",{className:"rounded-2xl border border-line/70 bg-card/65 p-4",children:[t.jsx("p",{className:"text-sm font-semibold text-foreground capitalize",children:e}),t.jsx("div",{className:"mt-3 space-y-2",children:Ke[e].map(a=>{const n=A.includes(a.id);return t.jsxs("label",{className:"flex cursor-pointer items-start gap-2 text-sm text-muted",children:[t.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 rounded border-line/70 bg-card text-brand-500 focus-visible:ring-2 focus-visible:ring-brand-500/40",checked:n,onChange:()=>{be(b=>b.includes(a.id)?b.filter(v=>v!==a.id):[...b,a.id])}}),t.jsxs("span",{className:"min-w-0",children:[t.jsxs("span",{className:"font-semibold text-foreground",children:[a.icon," ",a.name]}),t.jsx("span",{className:"mt-0.5 block text-xs text-muted",children:a.description})]})]},a.id)})})]},e))}),t.jsx("p",{className:"mt-3 text-xs text-muted",children:"Tip: If you leave this empty, all built-in apps will show by default."})]}),t.jsxs("div",{className:"rounded-2xl border border-line/70 bg-panel/55 p-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-foreground",children:"QR & Usage Alerts"}),t.jsx("p",{className:"mt-1 text-xs text-muted",children:"Tune QR logo size and when users see data usage warnings."}),t.jsxs("div",{className:"mt-4 space-y-3",children:[t.jsx(i,{label:"QR Logo Size (%)",value:Oe,onChange:e=>fe(e.target.value),placeholder:"22"}),t.jsx(i,{label:"Usage Alert Thresholds (%)",value:Ae,onChange:e=>he(e.target.value),placeholder:"80,90,95"})]})]})]}),t.jsxs("div",{className:"rounded-2xl border border-line/70 bg-panel/55 p-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-foreground",children:"Custom Apps (JSON)"}),t.jsxs("p",{className:"mt-1 text-xs text-muted",children:["Advanced: define extra client tiles. Provide an array of objects with fields: ",t.jsx("code",{className:"font-mono",children:"id,name,icon,platforms,usesFormat,urlScheme,storeUrl"}),"."]}),t.jsx("textarea",{value:ye,onChange:e=>we(e.target.value),rows:8,className:"mt-3 w-full rounded-2xl border border-line/80 bg-card/75 px-4 py-3 font-mono text-xs text-foreground outline-none transition-all duration-200 focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-app"})]}),t.jsxs("div",{className:"flex flex-col gap-2 border-t border-line/70 pt-4 sm:flex-row sm:items-center",children:[t.jsx(W,{onClick:()=>ze.mutate(),loading:ze.isPending,disabled:!P.trim()||Pe.isPending||!!u,children:k?"Save Changes":"Create Branding"}),t.jsx(W,{variant:"secondary",type:"button",onClick:()=>{y("#3b82f6"),w("#6366f1"),Y("#3b82f6"),Q("#6366f1"),H("62")},children:"Reset Colors"})]})]}),t.jsxs(Ye,{children:[t.jsx("h3",{className:"mb-4 text-lg font-semibold text-foreground",children:"Branding Profiles"}),t.jsx("div",{className:"overflow-x-auto rounded-2xl border border-line/70",children:t.jsxs("table",{className:"min-w-full divide-y divide-line/70",children:[t.jsx("thead",{className:"bg-panel/60",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase tracking-wider text-muted",children:"Name"}),t.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase tracking-wider text-muted",children:"Scope"}),t.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase tracking-wider text-muted",children:"App Name"}),t.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase tracking-wider text-muted",children:"Priority"}),t.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase tracking-wider text-muted",children:"Enabled"}),t.jsx("th",{className:"px-3 py-2 text-right text-xs font-medium uppercase tracking-wider text-muted",children:"Action"})]})}),t.jsxs("tbody",{className:"divide-y divide-line/70 bg-card/60",children:[(Se.data||[]).map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-3 py-2 text-sm text-foreground",children:e.name}),t.jsxs("td",{className:"px-3 py-2 text-sm text-muted",children:[e.scope,e.scope==="USER"&&e.userId?` #${e.userId}`:"",e.scope==="GROUP"&&e.groupId?` #${e.groupId}`:""]}),t.jsx("td",{className:"px-3 py-2 text-sm text-muted",children:e.appName||"One-UI"}),t.jsx("td",{className:"px-3 py-2 text-sm text-muted",children:e.priority}),t.jsx("td",{className:"px-3 py-2",children:t.jsx("button",{type:"button",onClick:()=>st.mutate(e),className:`inline-flex rounded-full px-2 py-1 text-xs font-medium transition ${e.enabled?"border border-emerald-500/35 bg-emerald-500/15 text-emerald-100":"border border-line/70 bg-card/60 text-muted"}`,children:e.enabled?"ON":"OFF"})}),t.jsx("td",{className:"px-3 py-2 text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{type:"button",onClick:()=>at(e),className:"rounded-lg p-2 text-muted hover:bg-card/70 hover:text-foreground","aria-label":`Edit ${e.name}`,children:t.jsx(gt,{className:"h-4 w-4"})}),t.jsx("button",{type:"button",onClick:()=>lt.mutate(e.id),className:"rounded-lg p-2 text-rose-400 hover:bg-rose-500/10 hover:text-rose-300","aria-label":`Delete ${e.name}`,children:t.jsx(bt,{className:"h-4 w-4"})})]})})]},e.id)),!Se.isLoading&&(Se.data||[]).length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"px-3 py-4 text-center text-sm text-muted",children:"No branding profile configured"})}):null]})]})})]})]})};export{Vt as default};
