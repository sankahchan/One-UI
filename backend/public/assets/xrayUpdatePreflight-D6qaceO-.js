function r(e,t){const a=e==null?void 0:e[t];return typeof a=="string"&&a.trim()?a.trim():null}function d(e){const t=r(e.metadata,"scriptPath")||"/opt/xray-panel/scripts/update-xray-core.sh",a=r(e.metadata,"composeFilePath")||"/opt/xray-panel/docker-compose.yml",o=r(e.metadata,"containerName")||"xray-core",i=r(e.metadata,"command"),s=r(e.metadata,"lockName")||"one-ui-xray-update",n=r(e.metadata,"ownerId"),c=r(e.metadata,"expiresAt");switch(e.id){case"update-script":return[`export XRAY_UPDATE_SCRIPT=${t}`,"echo $XRAY_UPDATE_SCRIPT","Restart backend service after env changes."];case"update-script-executable":return[`chmod +x ${t}`,`ls -l ${t}`];case"compose-file":return[`export COMPOSE_FILE=${a}`,`ls -l ${a}`];case"docker-daemon":return["docker version","docker ps","sudo systemctl status docker","sudo systemctl restart docker"];case"xray-container":return[`docker ps --filter "name=^/${o}$"`,`docker compose up -d ${o==="xray-core"?"xray":o}`];case"xray-version-read":return[`docker exec ${o} xray version`];case"update-script-dry-run":return[i||`${t} --stable --canary --no-restart --dry-run --yes`];case"update-lock":return[n&&c?`Lock active (${s}) by ${n} until ${c}. Wait for release or investigate stuck job.`:`Inspect lock ${s} and wait for release before retrying.`,"Retry preflight after lock is released."];default:return[]}}function u(e,t){return r(e==null?void 0:e.metadata,t)}export{d as a,u as g};
