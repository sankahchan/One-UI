import{c as S,r as a,j as d,p as V}from"./index-Mm4FQecB.js";import{c as b}from"./cn-BLSKlp9E.js";/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=S("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),W=(f,v,g)=>Math.max(v,Math.min(g,f)),U=({items:f,children:v,align:g="right",sideOffset:s=8,triggerClassName:P,menuClassName:A,ariaLabel:C="More actions",disabled:L=!1})=>{const R=a.useId(),m=a.useRef(null),y=a.useRef(null),[i,h]=a.useState(!1),[t,M]=a.useState(null),p=typeof document<"u",j=a.useMemo(()=>f.filter(e=>!!(e!=null&&e.label)),[f]);a.useEffect(()=>{i||M(null)},[i]),a.useLayoutEffect(()=>{if(!i||!p)return;const e=m.current,n=y.current;if(!e||!n)return;const u=()=>{const o=e.getBoundingClientRect(),x=n.getBoundingClientRect(),z=window.innerWidth,D=window.innerHeight,l=10;let k=g==="right"?o.right-x.width:o.left;k=W(k,l,z-l-x.width);let w=o.bottom+s,E;if(w+x.height>D-l){const H=o.top-s-x.height;if(H>=l)w=H;else{const I=D-l-(o.bottom+s),B=o.top-s-l;B>I?(E=B,w=l):(E=I,w=o.bottom+s)}}M({top:w,left:k,maxHeight:E})};u();let r=0;const c=()=>{window.cancelAnimationFrame(r),r=window.requestAnimationFrame(u)};return window.addEventListener("resize",c),window.addEventListener("scroll",c,!0),()=>{window.removeEventListener("resize",c),window.removeEventListener("scroll",c,!0),window.cancelAnimationFrame(r)}},[g,p,i,s]),a.useEffect(()=>{if(!i||!p)return;const e=u=>{var c,o;const r=u.target;r&&((c=m.current)!=null&&c.contains(r)||(o=y.current)!=null&&o.contains(r)||h(!1))},n=u=>{var r;u.key==="Escape"&&(h(!1),(r=m.current)==null||r.focus())};return window.addEventListener("pointerdown",e,{capture:!0}),window.addEventListener("keydown",n),()=>{window.removeEventListener("pointerdown",e,{capture:!0}),window.removeEventListener("keydown",n)}},[p,i]);const F=e=>{e.preventDefault(),e.stopPropagation(),!L&&h(n=>!n)},N=e=>n=>{n.preventDefault(),n.stopPropagation(),!e.disabled&&(e.onClick&&e.onClick(),h(!1))};return j.length===0?null:d.jsxs(d.Fragment,{children:[d.jsx("button",{ref:m,type:"button","aria-haspopup":"menu","aria-expanded":i,"aria-controls":i?R:void 0,"aria-label":C,title:C,disabled:L,onClick:F,className:b(P),children:v}),i&&p?V.createPortal(d.jsx("div",{id:R,ref:y,role:"menu",className:b("fixed z-[9999] w-60 rounded-xl border border-line/70 bg-card/95 p-1 shadow-lg shadow-black/10 backdrop-blur-sm",A),style:{top:(t==null?void 0:t.top)??0,left:(t==null?void 0:t.left)??0,opacity:t?1:0,pointerEvents:t?"auto":"none",maxHeight:(t==null?void 0:t.maxHeight)??void 0,overflowY:t!=null&&t.maxHeight?"auto":void 0},children:j.map(e=>{const n=e.icon;return d.jsxs("button",{type:"button",role:"menuitem",className:b("flex w-full items-center gap-2 rounded-lg px-3 py-2 text-left text-sm transition-colors disabled:cursor-not-allowed disabled:opacity-50",e.tone==="danger"?"text-red-500 hover:bg-red-500/10":"text-foreground hover:bg-panel/70"),disabled:e.disabled,onClick:N(e),children:[n?d.jsx(n,{className:b("h-4 w-4",e.tone==="danger"?"text-red-500":"text-muted")}):null,e.label]},e.key)})}),document.body):null]})};export{U as D,T as M};
