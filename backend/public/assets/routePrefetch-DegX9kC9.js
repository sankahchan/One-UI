const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-BUUzBdkA.js","assets/index-CG9kpP9Y.js","assets/index-CujEh0NH.css","assets/useQuery-ClalJbNF.js","assets/useToast-C_OO-2JX.js","assets/cn-BLSKlp9E.js","assets/useXray-SvnEARzK.js","assets/useMutation-Br-t0osD.js","assets/xray-BZhXygCD.js","assets/formatters-CEEtD2TU.js","assets/Badge-DQo9BAHa.js","assets/Spinner-8vpN8vrI.js","assets/useTranslation-DQjABgHn.js","assets/wifi-BjumB3Vv.js","assets/system-v04BLkjp.js","assets/Button-B80QVKRC.js","assets/shield-check-Cc_ybT-Z.js","assets/clipboard-D_hUxpVN.js","assets/xrayUpdatePreflight-CrNj47ho.js","assets/ConfirmDialog-BK4iJYOB.js","assets/lock-tTOqKmJY.js","assets/settings-d9-a0G4L.js","assets/Skeleton-UQb2SfAS.js","assets/users--3fvm3B6.js","assets/activity-DlclupDX.js","assets/Users-fZ0NMdES.js","assets/users-DYrgyhkk.js","assets/index.esm-C0GmNgaO.js","assets/useGroups-B1L4fEZz.js","assets/inbounds-BVe_b115.js","assets/useUsers-BPTWPe_a.js","assets/Input-vpwyIRrG.js","assets/download-CX5md0Yg.js","assets/index-BaaKCiO9.js","assets/MyanmarPriorityPreviewModal-gwumv2Y2.js","assets/external-link-CxefftMD.js","assets/DropdownMenu-DeZo-vZf.js","assets/chevron-up-C-Yx4ITY.js","assets/chevron-down-DRrM9xHJ.js","assets/useDebouncedValue-DTyF84Yy.js","assets/useSmartAutoRefresh-CWzzeZv1.js","assets/plus-CuU2M0FX.js","assets/search-DPrs-Nlw.js","assets/Groups-Dg_vhGx7.js","assets/layers-3-D9wEl04y.js","assets/sparkles-BY22KUTF.js","assets/trash-2-BX_Hm8OC.js","assets/UserDetail-DdCGNCQX.js","assets/InboundClientProfileModal-Bk4NkUOW.js","assets/qr-code-BvM-7NwP.js","assets/layout-dashboard-BPYhmTPx.js","assets/pen-square-DzONsOB7.js","assets/rotate-ccw-COvDNp33.js","assets/file-code-2-B1nNAYmF.js","assets/arrow-up-C-Gbu-3p.js","assets/arrow-down-CRYy1JIM.js","assets/Inbounds-Bun7g3Or.js","assets/arrow-right-Uv6Y7rOT.js","assets/upload-B5ihDRft.js","assets/Settings-CGygoRVA.js","assets/server-QlfyTjA1.js"])))=>i.map(i=>d[i]);
import{_ as a,q as r,b as D}from"./index-CG9kpP9Y.js";import{u as o,g as d}from"./users-DYrgyhkk.js";import{i as g}from"./inbounds-BVe_b115.js";import{g as P}from"./xray-BZhXygCD.js";const R={"/dashboard":()=>a(()=>import("./Dashboard-BUUzBdkA.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])),"/users":()=>a(()=>import("./Users-fZ0NMdES.js"),__vite__mapDeps([25,1,2,7,26,15,5,4,27,28,3,29,30,31,12,32,33,17,34,35,10,36,19,9,37,38,39,40,22,23,41,42,8])),"/groups":()=>a(()=>import("./Groups-Dg_vhGx7.js"),__vite__mapDeps([43,1,2,10,5,15,4,31,19,39,28,3,29,7,26,30,12,41,44,45,42,13,46])),"/users/:id":()=>a(()=>import("./UserDetail-DdCGNCQX.js"),__vite__mapDeps([47,1,2,10,5,15,4,36,19,48,33,3,17,11,12,32,49,34,27,28,29,7,26,30,31,22,9,50,51,45,52,46,53,54,55,35])),"/inbounds":()=>a(()=>import("./Inbounds-Bun7g3Or.js"),__vite__mapDeps([56,1,2,3,7,10,5,15,4,36,19,48,33,17,11,12,32,49,57,27,31,16,14,41,46,26,40,30,22,58,45,38,53,51])),"/settings":()=>a(()=>import("./Settings-CGygoRVA.js").then(e=>e.a),__vite__mapDeps([59,1,2,22,5,12,20,60,24]))},l={page:1,limit:50,search:"",status:void 0},p={page:1,limit:20,search:"",includeDisabled:!0},f={page:1,limit:20,search:""},h=2e4,_=new Set,m=new Map;function v(e){return e.startsWith("/users/")?"/users/:id":e.startsWith("/groups/")?"/groups":e}function E(e){const s=e.match(/^\/users\/(\d+)$/);if(!s)return null;const t=Number.parseInt(s[1],10);return!Number.isInteger(t)||t<=0?null:t}const A={"/dashboard":async()=>{const[e,s]=await Promise.allSettled([D.get("/users/stats"),P()]);e.status==="fulfilled"&&r.setQueryData(["system-stats"],e.value),s.status==="fulfilled"&&r.setQueryData(["online-users"],s.value)},"/users":async()=>{const e=await o.getUsers(l);r.setQueryData(["users",l],e)},"/groups":async()=>{const[e,s]=await Promise.all([d.list(p),d.listTemplates(f)]);r.setQueryData(["groups",p],e),r.setQueryData(["group-policy-templates",f],s)},"/inbounds":async()=>{const e=await g.getInbounds();r.setQueryData(["inbounds"],e.data??[])},"/users/:id":async e=>{const s=E(e);if(!s)return;const[t,u]=await Promise.all([o.getUserById(s),o.getUserDevices(s,60)]);r.setQueryData(["user",s],t),r.setQueryData(["user-devices",s,60],u)}};function T(e,s={}){const t=v(e),u=s.includeData??!0,i=s.force??!1,n=R[t];if(n&&(i||!_.has(t))&&(_.add(t),n()),!u)return;const c=A[t];if(!c)return;const y=m.get(e)??0;!i&&Date.now()-y<h||(m.set(e,Date.now()),c(e).catch(()=>{}))}export{T as p};
